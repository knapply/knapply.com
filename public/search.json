[
  {
    "authors": null,
    "categories": [
      "tutorial",
      "programming"
    ],
    "content": "\r\rDefine doubler_*() Function\rRun doubler_*() Function\rCitation and \\(\\normalsize{\\textrm B} \\scriptsize{\\textrm{IB}} \\normalsize{\\TeX}\\)\r\r\rDefine doubler_*() Function\r\rr_doubler \u0026lt;- function(x) {\rx * 2\r}\r\rdef py_doubler(x):\rreturn x * 2\r\r\r#include \u0026lt;Rcpp.h\u0026gt;\r// [[Rcpp::export]]\rint cpp_doubler(int x) {\rreturn x * 2;\r}\r\r\r\r\rRun doubler_*() Function\r\rr_doubler(x = 4)\r## [1] 8\r\rprint(py_doubler(x = 4))\r## 8\r\r\rcpp_doubler(x = 4)\r## [1] 8\r\r\r\r\rCitation and \\(\\normalsize{\\textrm B} \\scriptsize{\\textrm{IB}} \\normalsize{\\TeX}\\)\rKnapp, B. (2018, Nov. 1). Functions. Retrieved from https://knapply.com/post/functions/\r@misc{functions,\rauthor = {Knapp, Brendan},\rtitle = {Functions},\rurl = {https://knapply.com/post/functions/},\ryear = 2018,\rmonth = Nov,\rday = 1,\r}\r\r",
    "date": 1541030400,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1541204459,
    "objectID": "9a8dc953cedc3c6d3389666dd0d1022d",
    "permalink": "/post/functions/",
    "publishdate": "2018-11-01T00:00:00Z",
    "relpermalink": "/post/functions/",
    "section": "post",
    "summary": "Defining functions in R, Python, and C++/Rcpp.",
    "tags": [
      "R",
      "Python",
      "Cpp",
      "tutorial",
      "programming"
    ],
    "title": "Functions",
    "type": "post"
  },
  {
    "authors": null,
    "categories": [
      "data-carpentry",
      "Python",
      "R",
      "tutorial"
    ],
    "content": "\r\rSet Up\rData\rSubset Columns\rBasic Example: Select Columns by Name\rDrop Columns by Name\rSelect Columns by Name Range\rDrop Columns by Name Range\rSelect Columns by Index Range\rDrop Columns by Index Range\r\rSubset Rows\rFilter Rows, Single Logical Comparison\rFilter Rows, Multiple Logical Comparisons\r\rTransform Column Values\rBasic Example: Calculate Population in Thousands\rCalculate Total GDP\rCalculate Z Scores of 1977 GDP per Capita\r\rEnvironment\r\r\r--\r\u0026lt;!-- \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;{{ .Site.BaseURL }}/css/style.css\u0026quot; /\u0026gt; --\u0026gt;\r--\rSet Up\rData Frame Packages\rlibrary(tidyverse) # includes {dplyr}\rimport pandas as pd\r\r\rData\rlibrary(gapminder)\r(df \u0026lt;- gapminder %\u0026gt;% rename(population = pop)) # pandas uses pop() as a method\r## # A tibble: 1,704 x 6\r## country continent year lifeExp population gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan Asia 1952 28.8 8425333 779.\r## 2 Afghanistan Asia 1957 30.3 9240934 821.\r## 3 Afghanistan Asia 1962 32.0 10267083 853.\r## 4 Afghanistan Asia 1967 34.0 11537966 836.\r## 5 Afghanistan Asia 1972 36.1 13079460 740.\r## 6 Afghanistan Asia 1977 38.4 14880372 786.\r## 7 Afghanistan Asia 1982 39.9 12881816 978.\r## 8 Afghanistan Asia 1987 40.8 13867957 852.\r## 9 Afghanistan Asia 1992 41.7 16317921 649.\r## 10 Afghanistan Asia 1997 41.8 22227415 635.\r## # ... with 1,694 more rows\rdf = r.df #.round(4)\r#\rprint(df.head(10))\r## country continent year lifeExp population gdpPercap\r## 0 Afghanistan Asia 1952 28.801 8425333 779.445314\r## 1 Afghanistan Asia 1957 30.332 9240934 820.853030\r## 2 Afghanistan Asia 1962 31.997 10267083 853.100710\r## 3 Afghanistan Asia 1967 34.020 11537966 836.197138\r## 4 Afghanistan Asia 1972 36.088 13079460 739.981106\r## 5 Afghanistan Asia 1977 38.438 14880372 786.113360\r## 6 Afghanistan Asia 1982 39.854 12881816 978.011439\r## 7 Afghanistan Asia 1987 40.822 13867957 852.395945\r## 8 Afghanistan Asia 1992 41.674 16317921 649.341395\r## 9 Afghanistan Asia 1997 41.763 22227415 635.341351\r\rSubset Columns\rBasic Example: Select Columns by Name\rdf %\u0026gt;% select(country, population)\r## # A tibble: 1,704 x 2\r## country population\r## \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt;\r## 1 Afghanistan 8425333\r## 2 Afghanistan 9240934\r## 3 Afghanistan 10267083\r## 4 Afghanistan 11537966\r## 5 Afghanistan 13079460\r## 6 Afghanistan 14880372\r## 7 Afghanistan 12881816\r## 8 Afghanistan 13867957\r## 9 Afghanistan 16317921\r## 10 Afghanistan 22227415\r## # ... with 1,694 more rows\rres = df[[\u0026#39;country\u0026#39;, \u0026#39;population\u0026#39;]]\r#\rprint(res.head(10))\r## country population\r## 0 Afghanistan 8425333\r## 1 Afghanistan 9240934\r## 2 Afghanistan 10267083\r## 3 Afghanistan 11537966\r## 4 Afghanistan 13079460\r## 5 Afghanistan 14880372\r## 6 Afghanistan 12881816\r## 7 Afghanistan 13867957\r## 8 Afghanistan 16317921\r## 9 Afghanistan 22227415\r\rDrop Columns by Name\rdf %\u0026gt;% select(-country, -population)\r## # A tibble: 1,704 x 4\r## continent year lifeExp gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Asia 1952 28.8 779.\r## 2 Asia 1957 30.3 821.\r## 3 Asia 1962 32.0 853.\r## 4 Asia 1967 34.0 836.\r## 5 Asia 1972 36.1 740.\r## 6 Asia 1977 38.4 786.\r## 7 Asia 1982 39.9 978.\r## 8 Asia 1987 40.8 852.\r## 9 Asia 1992 41.7 649.\r## 10 Asia 1997 41.8 635.\r## # ... with 1,694 more rows\rres = df.drop([\u0026#39;country\u0026#39;, \u0026#39;population\u0026#39;], axis=1)\r#\rprint(res.head(10))\r## continent year lifeExp gdpPercap\r## 0 Asia 1952 28.801 779.445314\r## 1 Asia 1957 30.332 820.853030\r## 2 Asia 1962 31.997 853.100710\r## 3 Asia 1967 34.020 836.197138\r## 4 Asia 1972 36.088 739.981106\r## 5 Asia 1977 38.438 786.113360\r## 6 Asia 1982 39.854 978.011439\r## 7 Asia 1987 40.822 852.395945\r## 8 Asia 1992 41.674 649.341395\r## 9 Asia 1997 41.763 635.341351\r\rSelect Columns by Name Range\rdf %\u0026gt;% select(lifeExp:gdpPercap)\r## # A tibble: 1,704 x 3\r## lifeExp population gdpPercap\r## \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 28.8 8425333 779.\r## 2 30.3 9240934 821.\r## 3 32.0 10267083 853.\r## 4 34.0 11537966 836.\r## 5 36.1 13079460 740.\r## 6 38.4 14880372 786.\r## 7 39.9 12881816 978.\r## 8 40.8 13867957 852.\r## 9 41.7 16317921 649.\r## 10 41.8 22227415 635.\r## # ... with 1,694 more rows\rres = df.loc[:, \u0026#39;lifeExp\u0026#39;:\u0026#39;gdpPercap\u0026#39;]\r#\rprint(res.head(10))\r## lifeExp population gdpPercap\r## 0 28.801 8425333 779.445314\r## 1 30.332 9240934 820.853030\r## 2 31.997 10267083 853.100710\r## 3 34.020 11537966 836.197138\r## 4 36.088 13079460 739.981106\r## 5 38.438 14880372 786.113360\r## 6 39.854 12881816 978.011439\r## 7 40.822 13867957 852.395945\r## 8 41.674 16317921 649.341395\r## 9 41.763 22227415 635.341351\r\rDrop Columns by Name Range\rdf %\u0026gt;% select(-(lifeExp:gdpPercap))\r## # A tibble: 1,704 x 3\r## country continent year\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt;\r## 1 Afghanistan Asia 1952\r## 2 Afghanistan Asia 1957\r## 3 Afghanistan Asia 1962\r## 4 Afghanistan Asia 1967\r## 5 Afghanistan Asia 1972\r## 6 Afghanistan Asia 1977\r## 7 Afghanistan Asia 1982\r## 8 Afghanistan Asia 1987\r## 9 Afghanistan Asia 1992\r## 10 Afghanistan Asia 1997\r## # ... with 1,694 more rows\r# there has to be a better way...\rres = df.drop(df.loc[:, \u0026#39;lifeExp\u0026#39;:\u0026#39;gdpPercap\u0026#39;].head(0).columns, axis=1)\r#\rprint(res.head(10))\r## country continent year\r## 0 Afghanistan Asia 1952\r## 1 Afghanistan Asia 1957\r## 2 Afghanistan Asia 1962\r## 3 Afghanistan Asia 1967\r## 4 Afghanistan Asia 1972\r## 5 Afghanistan Asia 1977\r## 6 Afghanistan Asia 1982\r## 7 Afghanistan Asia 1987\r## 8 Afghanistan Asia 1992\r## 9 Afghanistan Asia 1997\r\rSelect Columns by Index Range\rdf %\u0026gt;% select(2:4)\r## # A tibble: 1,704 x 3\r## continent year lifeExp\r## \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Asia 1952 28.8\r## 2 Asia 1957 30.3\r## 3 Asia 1962 32.0\r## 4 Asia 1967 34.0\r## 5 Asia 1972 36.1\r## 6 Asia 1977 38.4\r## 7 Asia 1982 39.9\r## 8 Asia 1987 40.8\r## 9 Asia 1992 41.7\r## 10 Asia 1997 41.8\r## # ... with 1,694 more rows\rres = df[df.columns[1:4]]\r#\rprint(res.head(10))\r## continent year lifeExp\r## 0 Asia 1952 28.801\r## 1 Asia 1957 30.332\r## 2 Asia 1962 31.997\r## 3 Asia 1967 34.020\r## 4 Asia 1972 36.088\r## 5 Asia 1977 38.438\r## 6 Asia 1982 39.854\r## 7 Asia 1987 40.822\r## 8 Asia 1992 41.674\r## 9 Asia 1997 41.763\r\rDrop Columns by Index Range\rdf %\u0026gt;% select(-(2:4))\r## # A tibble: 1,704 x 3\r## country population gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan 8425333 779.\r## 2 Afghanistan 9240934 821.\r## 3 Afghanistan 10267083 853.\r## 4 Afghanistan 11537966 836.\r## 5 Afghanistan 13079460 740.\r## 6 Afghanistan 14880372 786.\r## 7 Afghanistan 12881816 978.\r## 8 Afghanistan 13867957 852.\r## 9 Afghanistan 16317921 649.\r## 10 Afghanistan 22227415 635.\r## # ... with 1,694 more rows\rres = df.drop(df.columns[1:4], axis = 1)\r#\rprint(res.head(10))\r## country population gdpPercap\r## 0 Afghanistan 8425333 779.445314\r## 1 Afghanistan 9240934 820.853030\r## 2 Afghanistan 10267083 853.100710\r## 3 Afghanistan 11537966 836.197138\r## 4 Afghanistan 13079460 739.981106\r## 5 Afghanistan 14880372 786.113360\r## 6 Afghanistan 12881816 978.011439\r## 7 Afghanistan 13867957 852.395945\r## 8 Afghanistan 16317921 649.341395\r## 9 Afghanistan 22227415 635.341351\r\r\rSubset Rows\rFilter Rows, Single Logical Comparison\rdf %\u0026gt;% filter(gdpPercap \u0026lt; 500)\r## # A tibble: 63 x 6\r## country continent year lifeExp population gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Burundi Africa 1952 39.0 2445618 339.\r## 2 Burundi Africa 1957 40.5 2667518 380.\r## 3 Burundi Africa 1962 42.0 2961915 355.\r## 4 Burundi Africa 1967 43.5 3330989 413.\r## 5 Burundi Africa 1972 44.1 3529983 464.\r## 6 Burundi Africa 1997 45.3 6121610 463.\r## 7 Burundi Africa 2002 47.4 7021078 446.\r## 8 Burundi Africa 2007 49.6 8390505 430.\r## 9 Cambodia Asia 1952 39.4 4693836 368.\r## 10 Cambodia Asia 1957 41.4 5322536 434.\r## # ... with 53 more rows\rres = df[df.gdpPercap \u0026lt; 500]\r#\rprint(res.head(10))\r## country continent year lifeExp population gdpPercap\r## 204 Burundi Africa 1952 39.031 2445618 339.296459\r## 205 Burundi Africa 1957 40.533 2667518 379.564628\r## 206 Burundi Africa 1962 42.045 2961915 355.203227\r## 207 Burundi Africa 1967 43.548 3330989 412.977514\r## 208 Burundi Africa 1972 44.057 3529983 464.099504\r## 213 Burundi Africa 1997 45.326 6121610 463.115148\r## 214 Burundi Africa 2002 47.360 7021078 446.403513\r## 215 Burundi Africa 2007 49.580 8390505 430.070692\r## 216 Cambodia Asia 1952 39.417 4693836 368.469286\r## 217 Cambodia Asia 1957 41.366 5322536 434.038336\r\rFilter Rows, Multiple Logical Comparisons\rdf %\u0026gt;% filter(year \u0026gt; 1990, lifeExp \u0026lt; 40)\r## # A tibble: 8 x 6\r## country continent year lifeExp population gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Rwanda Africa 1992 23.6 7290203 737.\r## 2 Rwanda Africa 1997 36.1 7212583 590.\r## 3 Sierra Leone Africa 1992 38.3 4260884 1069.\r## 4 Sierra Leone Africa 1997 39.9 4578212 575.\r## 5 Somalia Africa 1992 39.7 6099799 927.\r## 6 Swaziland Africa 2007 39.6 1133066 4513.\r## 7 Zambia Africa 2002 39.2 10595811 1072.\r## 8 Zimbabwe Africa 2002 40.0 11926563 672.\rres = df[(df.year \u0026gt; 1990) \u0026amp; (df.lifeExp \u0026lt; 40)]\r#\rprint(res.head(10))\r## country continent ... population gdpPercap\r## 1292 Rwanda Africa ... 7290203 737.068595\r## 1293 Rwanda Africa ... 7212583 589.944505\r## 1352 Sierra Leone Africa ... 4260884 1068.696278\r## 1353 Sierra Leone Africa ... 4578212 574.648158\r## 1400 Somalia Africa ... 6099799 926.960296\r## 1463 Swaziland Africa ... 1133066 4513.480643\r## 1690 Zambia Africa ... 10595811 1071.613938\r## 1702 Zimbabwe Africa ... 11926563 672.038623\r## ## [8 rows x 6 columns]\rdf %\u0026gt;% filter(population \u0026lt; 10000 | gdpPercap \u0026gt; 100000)\r## # A tibble: 3 x 6\r## country continent year lifeExp population gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Kuwait Asia 1952 55.6 160000 108382.\r## 2 Kuwait Asia 1957 58.0 212846 113523.\r## 3 Kuwait Asia 1972 67.7 841934 109348.\rres = df[(df.population \u0026lt; 10000) | (df.gdpPercap \u0026gt; 100000)]\r#\rprint(res.head(10))\r## country continent year lifeExp population gdpPercap\r## 852 Kuwait Asia 1952 55.565 160000 108382.3529\r## 853 Kuwait Asia 1957 58.033 212846 113523.1329\r## 856 Kuwait Asia 1972 67.712 841934 109347.8670\rdf %\u0026gt;% filter(year == 1997 \u0026amp; continent == \u0026quot;Europe\u0026quot;) # dplyr can use either `,` or `\u0026amp;` for \u0026quot;and\u0026quot;\r## # A tibble: 30 x 6\r## country continent year lifeExp population gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Albania Europe 1997 73.0 3428038 3193.\r## 2 Austria Europe 1997 77.5 8069876 29096.\r## 3 Belgium Europe 1997 77.5 10199787 27561.\r## 4 Bosnia and Herzegovina Europe 1997 73.2 3607000 4766.\r## 5 Bulgaria Europe 1997 70.3 8066057 5970.\r## 6 Croatia Europe 1997 73.7 4444595 9876.\r## 7 Czech Republic Europe 1997 74.0 10300707 16049.\r## 8 Denmark Europe 1997 76.1 5283663 29804.\r## 9 Finland Europe 1997 77.1 5134406 23724.\r## 10 France Europe 1997 78.6 58623428 25890.\r## # ... with 20 more rows\rres = df[(df.year == 1997) \u0026amp; (df.continent == \u0026quot;Europe\u0026quot;)]\r#\rprint(res.head(10))\r## country continent ... population gdpPercap\r## 21 Albania Europe ... 3428038 3193.054604\r## 81 Austria Europe ... 8069876 29095.920660\r## 117 Belgium Europe ... 10199787 27561.196630\r## 153 Bosnia and Herzegovina Europe ... 3607000 4766.355904\r## 189 Bulgaria Europe ... 8066057 5970.388760\r## 381 Croatia Europe ... 4444595 9875.604515\r## 405 Czech Republic Europe ... 10300707 16048.514240\r## 417 Denmark Europe ... 5283663 29804.345670\r## 525 Finland Europe ... 5134406 23723.950200\r## 537 France Europe ... 58623428 25889.784870\r## ## [10 rows x 6 columns]\r\r\rTransform Column Values\rBasic Example: Calculate Population in Thousands\rdf %\u0026gt;% select(population) %\u0026gt;% mutate(pop_in_thousands = population / 1000) \r## # A tibble: 1,704 x 2\r## population pop_in_thousands\r## \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 8425333 8425.\r## 2 9240934 9241.\r## 3 10267083 10267.\r## 4 11537966 11538.\r## 5 13079460 13079.\r## 6 14880372 14880.\r## 7 12881816 12882.\r## 8 13867957 13868.\r## 9 16317921 16318.\r## 10 22227415 22227.\r## # ... with 1,694 more rows\rres = df[[\u0026#39;population\u0026#39;]].assign(pop_in_thousands = df.population / 1000)\r#\rprint(res.head(10))\r## population pop_in_thousands\r## 0 8425333 8425.333\r## 1 9240934 9240.934\r## 2 10267083 10267.083\r## 3 11537966 11537.966\r## 4 13079460 13079.460\r## 5 14880372 14880.372\r## 6 12881816 12881.816\r## 7 13867957 13867.957\r## 8 16317921 16317.921\r## 9 22227415 22227.415\r\rCalculate Total GDP\rdf %\u0026gt;%\rselect(population, gdpPercap) %\u0026gt;% mutate(total_GDP = population * gdpPercap)\r## # A tibble: 1,704 x 3\r## population gdpPercap total_GDP\r## \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 8425333 779. 6567086330.\r## 2 9240934 821. 7585448670.\r## 3 10267083 853. 8758855797.\r## 4 11537966 836. 9648014150.\r## 5 13079460 740. 9678553274.\r## 6 14880372 786. 11697659231.\r## 7 12881816 978. 12598563401.\r## 8 13867957 852. 11820990309.\r## 9 16317921 649. 10595901589.\r## 10 22227415 635. 14121995875.\r## # ... with 1,694 more rows\rres = df[[\u0026#39;population\u0026#39;, \u0026#39;gdpPercap\u0026#39;]].assign(total_GDP = df.population * df.gdpPercap)\r#\rprint(res.head(10))\r## population gdpPercap total_GDP\r## 0 8425333 779.445314 6.567086e+09\r## 1 9240934 820.853030 7.585449e+09\r## 2 10267083 853.100710 8.758856e+09\r## 3 11537966 836.197138 9.648014e+09\r## 4 13079460 739.981106 9.678553e+09\r## 5 14880372 786.113360 1.169766e+10\r## 6 12881816 978.011439 1.259856e+10\r## 7 13867957 852.395945 1.182099e+10\r## 8 16317921 649.341395 1.059590e+10\r## 9 22227415 635.341351 1.412200e+10\r\rCalculate Z Scores of 1977 GDP per Capita\r\\[ z = \\frac {x_i -\\mu_x} {\\sigma_x}\\]\n\r\\(x\\) = gdpPercap\r\\(\\mu_x\\) = the mean of \\(x\\) = mean(gdpPercap) or gdpPercap.mean()\r\\(\\sigma_x\\) = the standard deviation of x = sd(gdpPercap) or gdpPercap.std()\r\rdf %\u0026gt;% filter(year == 1977) %\u0026gt;%\rselect(gdpPercap) %\u0026gt;% mutate(gdp_per_cap_z_score = (gdpPercap - mean(gdpPercap)) / sd(gdpPercap))\r## # A tibble: 142 x 2\r## gdpPercap gdp_per_cap_z_score\r## \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 786. -0.781\r## 2 3533. -0.452\r## 3 4910. -0.287\r## 4 3009. -0.515\r## 5 10079. 0.331\r## 6 18334. 1.32 ## 7 19749. 1.49 ## 8 19340. 1.44 ## 9 660. -0.796\r## 10 19118. 1.41 ## # ... with 132 more rows\rdf_1977 = df[df.year == 1977][[\u0026#39;gdpPercap\u0026#39;]] # intermediate assignment\r#\rres = df_1977.assign(gdp_per_cap_z_score = (df_1977.gdpPercap - df_1977.gdpPercap.mean()) / df_1977.gdpPercap.std())\r#\rprint(res.head(10))\r## gdpPercap gdp_per_cap_z_score\r## 5 786.113360 -0.780516\r## 17 3533.003910 -0.452038\r## 29 4910.416756 -0.287325\r## 41 3008.647355 -0.514741\r## 53 10079.026740 0.330746\r## 65 18334.197510 1.317913\r## 77 19749.422300 1.487148\r## 89 19340.101960 1.438200\r## 101 659.877232 -0.795611\r## 113 19117.974480 1.411638\r\rالنهاية\n\r\r\rEnvironment\rprint(sys.version)\r## 3.6.5 |Anaconda, Inc.| (default, Mar 29 2018, 13:32:41) [MSC v.1900 64 bit (AMD64)]\rprint(pd.__version__)\r## 0.23.4\rsessionInfo()\r## R version 3.5.1 (2018-07-02)\r## Platform: x86_64-w64-mingw32/x64 (64-bit)\r## Running under: Windows 10 x64 (build 17134)\r## ## Matrix products: default\r## ## locale:\r## [1] LC_COLLATE=English_United States.1252 ## [2] LC_CTYPE=English_United States.1252 ## [3] LC_MONETARY=English_United States.1252\r## [4] LC_NUMERIC=C ## [5] LC_TIME=English_United States.1252 ## ## attached base packages:\r## [1] stats graphics grDevices utils datasets methods base ## ## other attached packages:\r## [1] gapminder_0.3.0 kableExtra_0.9.0 forcats_0.3.0 ## [4] stringr_1.3.1.9000 dplyr_0.7.99.9000 purrr_0.2.4.9000 ## [7] readr_1.1.1 tidyr_0.8.1.9000 tibble_1.4.2 ## [10] ggplot2_3.1.0.9000 tidyverse_1.2.1.9000 reticulate_1.10.0.9002\r## ## loaded via a namespace (and not attached):\r## [1] tidyselect_0.2.5 xfun_0.4 haven_1.1.2.9000 ## [4] lattice_0.20-35 colorspace_1.3-2 generics_0.0.1.9000 ## [7] viridisLite_0.3.0 htmltools_0.3.6 yaml_2.2.0 ## [10] utf8_1.1.4 rlang_0.3.0.9000 pillar_1.3.0.9000 ## [13] glue_1.3.0 withr_2.1.2.9000 modelr_0.1.2 ## [16] readxl_1.1.0 plyr_1.8.4 munsell_0.5.0 ## [19] blogdown_0.9.1 gtable_0.2.0 cellranger_1.1.0 ## [22] rvest_0.3.2 evaluate_0.12 knitr_1.20.21 ## [25] fansi_0.3.0 broom_0.5.0.9001 Rcpp_0.12.19.3 ## [28] backports_1.1.2 scales_1.0.0.9000 jsonlite_1.5 ## [31] hms_0.4.2 digest_0.6.18 stringi_1.2.4 ## [34] bookdown_0.7.21 grid_3.5.1 cli_1.0.1 ## [37] tools_3.5.1 magrittr_1.5 lazyeval_0.2.1 ## [40] crayon_1.3.4 pkgconfig_2.0.2 Matrix_1.2-14 ## [43] xml2_1.2.0 lubridate_1.7.4 assertthat_0.2.0 ## [46] rmarkdown_1.10.14 httr_1.3.1 rstudioapi_0.8.0.9000\r## [49] htmldeps_0.1.1 R6_2.3.0 compiler_3.5.1\r\r",
    "date": 1532390400,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1540947664,
    "objectID": "332ad974cc310c3aa12846ba5f71bd6e",
    "permalink": "/post/data-frame-operations/",
    "publishdate": "2018-07-24T00:00:00Z",
    "relpermalink": "/post/data-frame-operations/",
    "section": "post",
    "summary": "Essential Data Frame Operations in Python (w/ pandas) and R (with dplyr).",
    "tags": [
      "dplyr",
      "pandas"
    ],
    "title": "Data Frame Operations Thesaurus",
    "type": "post"
  },
  {
    "authors": null,
    "categories": [
      "R",
      "statistics",
      "tutorial"
    ],
    "content": "\r\rToy Values\rPython list\rR vector\r\rLength\rPython’s len()\rR’s length()\r\rUnique Values\rPython’s set()\rR’s unique()\r\rMax\rPython’s max()\rR’s max()\r\rMin\rPython’s min()\rR’s min()\r\rSum\rPython’s sum()\rR’s sum()\r\rMean\rPython’s statistics.mean()\rR’s mean()\r\rMode\rPython’s statistics.mode()\rR’s mode\r\rMedian\rPython\rR\r\rEnvironment\r\r\rRather than letting R and Python do all the work for us (i.e. cheating, as a no-nonsense former professor would call it), the best way to understand what any calculation actually means is to walk through the steps. I doubt I’m the only one who wishes they started to code this way.\nWith that in mind, here’s a collection of “from scratch” functions implemented in both R and Python that provide minimal hand-holding.\nThis should (hopefully) also serve as a handy reference for useRs and Pythonistas curious about the greenness of the grass on the other side. My goal here is to lay a foundation before writing similar walkthroughs covering more complicated workflows, statistical models, and machine learning.\n\nA quick note:\nIn R, experience has taught me to use [[ instead of [ whenever it’s possible to obtain the desired results with [[. With that in mind, I try to use [[ in the R examples (unless swapping between R and Python messed me up).\nClearly, useRs have an assortment of opinions on how to use [[ and [, but this is probably as simple an explanation as you can get:\n\nAll that said, let’s get to it.\nToy Values\rWe’ll use the same values for x throughout:\nPython list\rx = [25.88, 37.05, 38.46, 76.78, 76.78, 71.97, 33.99, 73.29, 2.53, 76.78, 74.94, 73.4, 64.87, 57.8, 42.82, 76.78, 7.95, 60.26, 2.14, 59.51]\r\rR vector\rx \u0026lt;- c(25.88, 37.05, 38.46, 76.78, 76.78, 71.97, 33.99, 73.29, 2.53, 76.78,\r74.94, 73.4, 64.87, 57.8, 42.82, 76.78, 7.95, 60.26, 2.14, 59.51)\rThe first thing we need to do is define some helper functions. In order to calculate mean, median, and mode, we will also need to find the:\n\rlength of the sequence: my_length()\runique values in a sequence: my_unique()\rmaximum value in a sequence: my_max()\r\rmy_min() is also included for reference\r\rsum of values in a sequence: my_sum()\r\r\r\rLength\rPython’s len()\rdef my_length(x): # `def`ine the function, which takes the parameter `x`\rlength = 0 # declare a `length` variable that initially equals `0`\rfor item in x: # `for` each `item` in `x`\rlength += 1 # add `1` to `length` (same as `length = length + 1`)\rreturn length # finally, `return` the calculated `length`\rprint(my_length(x))\r## 20\rprint(len(x) == my_length(x)) # does our custom function give the same result as Python\u0026#39;s built-in?\r## True\r\rR’s length()\rmy_length \u0026lt;- function(x) { # declare the `function`, which takes the parameter `x`\rlength \u0026lt;- 0L # declare a `length` variable that initially equals `0L`...\r# ... in R, numbers are treated as `double`s unless we...\r# ... specifiy them to be `integer`s. `0L` is the same as...\r# ... `as.integer(0)`.\r# `length` doesn\u0026#39;t NEED to be an `integer`, but if we\u0026#39;re ... # ... careful about types early, we\u0026#39;ll save headaches later.\rfor(item in x) { # `for` each `item` in `x`\rlength \u0026lt;- length + 1L # add `1L` to length\r}\rlength # finally, return the calculated `length`...\r# we can use `return(length)`, but `return` in R is best used ...\r# ... only when you\u0026#39;re breaking from a function early\r}\rmy_length(x)\r## [1] 20\r # does our custom function give the same result as R\u0026#39;s built-in?\rlength(x) == my_length(x)\r## [1] TRUE\r\r\rUnique Values\rPython’s set()\rdef my_unique(x): # `def`ine the function, which takes the parameter `x`\runique_x = [] # declare an empty `list` named `unique_x`\rfor item in x: # for each `item` in `x`\rif item not in unique_x: # if the `item` is not in `unique_x`\runique_x.append(item) # `append` the `item` to `unique_x`\rreturn unique_x # finally, `return` the list of `unique_x`\u0026#39;s values\rprint(my_unique(x))\r## [25.88, 37.05, 38.46, 76.78, 71.97, 33.99, 73.29, 2.53, 74.94, 73.4, 64.87, 57.8, 42.82, 7.95, 60.26, 2.14, 59.51]\rIn order to test Python’s my_unique(), we need to use a loop as Python set()s are not ordered.\nHere, we’ll use a “list-comprehension”.\nIn Python, we can do this…\nmatches = []\rfor item in my_unique(x):\rmatches.append(item in set(x))\rprint(all(matches))\r## True\r… but it’s considered more “Pythonic” to use a list-comprehension in this scenario…\nmatches = [item in set(x) for item in my_unique(x)]\rprint(all(matches))\r## True\r… which we can wrap up in a one-liner…\nprint(all([item in set(x) for item in my_unique(x)]))\r## True\rJokes aside, list-comprehensions are generally faster. Considering “pure” Python isn’t vectorized like R, they are quite handy.\n\rR’s unique()\rmy_unique \u0026lt;- function(x) { # declare the `function`, which takes the parameter `x`\runique_x \u0026lt;- vector(mode = mode(x)) # declare an empty `vector` with the same `mode` as `x`...\r# ... in R, it\u0026#39;s a good habit to enforce data types ...\r# ... to maximize performance. In a perfect world, we\r# ... would also want to set `unique_x`\u0026#39;s `length`.\rfor(item in x) {\rif(!item %in% unique_x) { # in R, `%in%` is a vectorized match that returns a `logical` vector\runique_x \u0026lt;- c(unique_x, item)\r}\r}\runique_x\r}\rmy_unique(x)\r## [1] 25.88 37.05 38.46 76.78 71.97 33.99 73.29 2.53 74.94 73.40 64.87\r## [12] 57.80 42.82 7.95 60.26 2.14 59.51\r # does our custom function give the same result as R\u0026#39;s built-in?\rall(unique(x) == my_unique(x))\r## [1] TRUE\r\r\rMax\rPython’s max()\rdef my_max(x):\rmax = x[0]\rfor item in x:\rif item \u0026gt; max:\rmax = item\rreturn max\rprint(my_max(x))\r# does our custom function give the same result as Pythons\u0026#39;s built-in?\r## 76.78\rprint(max(x) == my_max(x))\r## True\r\rR’s max()\rmy_max \u0026lt;- function(x) {\rmax \u0026lt;- x[[1]]\rfor(item in x) {\rif(item \u0026gt; max) {\rmax \u0026lt;- item\r}\r}\rmax\r}\rmy_max(x)\r## [1] 76.78\r # does our custom function give the same result as R\u0026#39;s built-in?\rmax(x) == my_max(x)\r## [1] TRUE\r\r\rMin\rPython’s min()\rdef my_min(x):\rmin = x[0] # Python indexing starts at `0`, so `min` starts as the first item in `x`\rfor item in x:\rif item \u0026lt; min:\rmin = item\rreturn min\rprint(my_min(x))\r# does our custom function give the same result as Python\u0026#39;s built-in?\r## 2.14\rprint(min(x) == my_min(x))\r## True\r\rR’s min()\rmy_min \u0026lt;- function(x) {\rmin \u0026lt;- x[[1]] # R indexing starts at `1`, so `min` starts as the first item in `x`\rfor(item in x) {\rif(item \u0026lt; min) {\rmin \u0026lt;- item\r}\r}\rmin\r}\rmy_min(x)\r## [1] 2.14\r # does our custom function give the same result as Python\u0026#39;s built-in?\rmin(x) == my_min(x)\r## [1] TRUE\r\r\rSum\rPython’s sum()\rdef my_sum(x): # `def`ine the function, which takes the parameter `x`\rsum = 0 # declare a `sum` variable that initially equals `0`\rfor item in x: # `for` each `item` in `x`\rsum += item # add the `item`\u0026#39;s value to `sum`\rreturn sum # finally, return the calculated `sum`\rprint(my_sum(x))\r# does our custom function give the same result as Python\u0026#39;s built-in?\r## 1033.98\rprint(sum(x) == my_sum(x))\r## True\r\rR’s sum()\rmy_sum \u0026lt;- function(x) { # declare the `function`, which takes the parameter `x`\rsum \u0026lt;- 0 # declare a `sum` variable that initially equals `0`...\rfor(item in x) { # `for` each `item` in x\rsum \u0026lt;- sum + item # add the `item` to `sum`\r}\rsum # finally, call `sum` to return its value\r}\rsum(x)\r## [1] 1033.98\r # does our custom function give the same result as R\u0026#39;s built-in?\rsum(x) == my_sum(x)\r## [1] TRUE\r\n\rNow that we’ve built our helper functions, let’s take on the measures of central tendency.\n\r\r\rMean\rPython’s statistics.mean()\rdef my_mean(x):\rreturn float(my_sum(x) / my_length(x))\rprint(my_mean(x))\r## 51.699\rimport statistics # in Python, `mean()` is kept in the `statistics` module, which ...\r# ... we `import` like this\r# does our custom function give the same result as \u0026#39;s built-in?\rprint(statistics.mean(x) == my_mean(x))\r## True\r\rR’s mean()\rmy_mean \u0026lt;- function(x) {\rmy_sum(x) / my_length(x)\r}\rmy_mean(x)\r## [1] 51.699\rmean(x) == my_mean(x)\r## [1] TRUE\r\r\rMode\rPython’s statistics.mode()\rdef my_mode(x):\runique_x = my_unique(x)\roccurrences = {} # create and empty `dict()` to which we will be adding items\rfor item in unique_x:\rcount = my_length([value for value in x if value == item]) # count up the occurrences of each `item`\roccurrences.update({item: count}) # add the count to the the `occurrences` `dict()`\rkeys = list(occurrences.keys()) # `dict()`s are unordered, so we make a list of `keys`...\rvalues = list(occurrences.values()) # ... and a list of `values`\rreturn keys[values.index(my_max(values))] # get the index of the max value and select that key\rprint(my_mode(x))\r## 76.78\rimport statistics\rprint(statistics.mode(x) == my_mode(x))\r## True\r\rR’s mode\rmy_mode \u0026lt;- function(x) {\runique_x \u0026lt;- my_unique(x)\roccurences \u0026lt;- vector(mode = mode(unique_x), length = length(unique_x))\rfor(item in unique_x) {\rcount \u0026lt;- c(item = my_length(x[x == item])) # because we\u0026#39;re dealing with vectors in R we can... # ... boolean mask with `[]` instead of using a loop\rnames(count) \u0026lt;- item # we turn `count` into a named `vector`...\r# but this coerces the `names` to `character`\roccurences \u0026lt;- c(occurences, count)\r}\ras.numeric(names(occurences[occurences == my_max(occurences)])) # convert the `names` back to `numeric`\r}\rmy_mode(x) # R doesn\u0026#39;t have a built-in function for a statistical mode as it\u0026#39;s not commonly used\r## [1] 76.78\r\r\rMedian\rFor median(), we need to be able to sort the list. We’re just going to use built-in functions, but you can see how a bubble sort is performed here.\nPython\rdef my_median(x):\rsorted_x = sorted(x)\rlength_x = my_length(x)\rmiddle_index = (length_x - 1) // 2 # `//` is Python\u0026#39;s operator for integer division\r# `%` is Python\u0026#39;s operator for remainder\rif length_x % 2: # if `x`\u0026#39;s length is an odd value\rmedian = sorted_x[middle_index]\relif not length_x % 2: # if `x`\u0026#39;s length is an even value\rmedian = my_mean([sorted_x[middle_index], sorted_x[middle_index + 1]])\rreturn median\rprint(my_median(x))\r## 59.885\rimport statistics\rprint(statistics.median(x) == my_median(x))\r## True\r\rR\rmy_median \u0026lt;- function(x) {\rsorted_x \u0026lt;- sort(x)\rlength_x \u0026lt;- my_length(x)\rmiddle_index \u0026lt;- length_x %/% 2 # `%/%` is R\u0026#39;s operator for integer division\rif(length_x %% 2) { # `%%` is R\u0026#39;s operator for remainder\rmedian = sorted_x[[middle_index]]\r}\relse if(!length_x %% 2) {\rmedian = my_mean(c(sorted_x[[middle_index]], sorted_x[[middle_index + 1]]))\r}\rmedian\r}\rmy_median(x)\r## [1] 59.885\rmedian(x) == my_median(x)\r## [1] TRUE\r\rالنهاية\n\r\r\rEnvironment\rprint(sys.version)\r## 3.6.5 |Anaconda, Inc.| (default, Mar 29 2018, 13:32:41) [MSC v.1900 64 bit (AMD64)]\rsessionInfo()\r## R version 3.5.1 (2018-07-02)\r## Platform: x86_64-w64-mingw32/x64 (64-bit)\r## Running under: Windows 10 x64 (build 17134)\r## ## Matrix products: default\r## ## locale:\r## [1] LC_COLLATE=English_United States.1252 ## [2] LC_CTYPE=English_United States.1252 ## [3] LC_MONETARY=English_United States.1252\r## [4] LC_NUMERIC=C ## [5] LC_TIME=English_United States.1252 ## ## attached base packages:\r## [1] stats graphics grDevices utils datasets methods base ## ## loaded via a namespace (and not attached):\r## [1] Rcpp_0.12.19.3 bookdown_0.7.21 lattice_0.20-35 ## [4] digest_0.6.18 grid_3.5.1 jsonlite_1.5 ## [7] magrittr_1.5 evaluate_0.12 blogdown_0.9.1 ## [10] stringi_1.2.4 Matrix_1.2-14 reticulate_1.10.0.9002\r## [13] rmarkdown_1.10.14 htmldeps_0.1.1 tools_3.5.1 ## [16] stringr_1.3.1.9000 xfun_0.4 yaml_2.2.0 ## [19] compiler_3.5.1 htmltools_0.3.6 knitr_1.20.21\r\r",
    "date": 1531872000,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1541118431,
    "objectID": "f68f7174d74360bd5512a2b254c988f9",
    "permalink": "/post/central-tendency/",
    "publishdate": "2018-07-18T00:00:00Z",
    "relpermalink": "/post/central-tendency/",
    "section": "post",
    "summary": "Measures of central tendency, from scratch.",
    "tags": [
      "R",
      "statistics",
      "tutorial"
    ],
    "title": "Measures of Central Tendency",
    "type": "post"
  },
  {
    "authors": null,
    "categories": [
      "R",
      "data-carpentry",
      "tutorial"
    ],
    "content": "\r\r\rContext\rReflection\rResources Up Front\rtibble\r%\u0026gt;%\r“Tidy” Data\rselect() columns\rfilter() Rows\rmutate() Columns\rarrange() Rows\rgroup_by() for Grouped Data\rsummarize()\r\r\r\nConsidering this is a blog post, I’m going to get all bloggy here before jumping into the code.\nContext\rI recently had the opportunity to teach some R coding to colleagues and classmates in a series of workshops. Some had already dabbled in R or other programming languages, but it was the first time that the majority of participants had written a single line of code.\nA few things happened in the week following the last session that I didn’t expect.\nFirst, I saw a bit of R code written on a campus whiteboard that had nothing to do with me, but was straight out of the workshop. It may have come from some of my data-centric colleagues who use R, so I didn’t think too much of it.\nThen, I overheard a conversation involving R from those in a program that doesn’t require any data-related coursework. Many folks are familiar with the name as the school’s primary data analysis course uses the {Rcmdr} GUI for statistical analysis, but these students would not have necessarily taken the course. I wondered if there was a connection.\nFinally, a student who didn’t even attend came to my office hours asking for resources. Why exactly? Some of his work colleagues attended. It turns out that they are now trying to incorporate some R-powered analysis in their work and he doesn’t want to miss out.\nThe workshop consisted of 3 consecutive Fridays lasting 90 minutes each. That’s only a total of 4.5 hours.\nThat’s relatively tiny amount of time.\nWait. Scratch that.\nThat’s a negligible amount of time.\n… but it was enough to convince some participants and non-participants that they should take advantage of the power that a bit of data-centric coding can offer.\n\rReflection\rI taught a similar 90 minute workshop last spring using R, but focused on base R and a few data types. 10 minutes in, I’m trying to explain the difference between a data.frame and a matrix and the person asking the question says something along the lines of “I guess I’m kinda dumb. Don’t worry about it.”\nFor context, these were international policy graduate students. While some have completed a bit of quantitative coursework, most don’t have a hardcore math or science background and programming is seen as something akin to wizardry. However, they hold domain expertise in some rather important subjects. These include WMD nonproliferation, international development, economic diplomacy, conflict studies, and environmental policy. Nearly half of the participants were international students and everyone is proficient in at least a second natural language. Most have already tackled big, complicated problems in their careers and the others are on their way to doing so following graduation. In a nutshell, they’re not dumb. The way I was teaching was dumb. They knew that they’re supposed to want to learn new skills, but they didn’t know why. Focusing on the “basics” didn’t show them anything immediately useful. It didn’t show them the why.\nAfter the workshop, I never heard anyone mention R outside my circle of fellow data folks.\nSince that time, I started using R more. Like, a lot more. I have found a way to use R in nearly everything I’ve done since May 2017. As a policy student myself, that has not always been very straightforward and I was still avoiding the strange “tidy” code I’d encounter on Stack Overflow and elsewhere. I realized the error of my ways when I came across Julia Silge and David Robinson’s Text Mining with R. It was like discovering that you’re still in the stone age while most people are off partying on spaceships.\nIn preparation for this workshop series, I found a lot of inspiration in Michael Levy’s presentation on teaching R, which itself echoes principles preached by other tidyverse advocates.\nA huge takeaway: live coding works.\nWriting code in real time shows every single step we make from opening the IDE, to reshaping the data, to debugging inevitable errors, to rendering a final report.\nWithin a few short weeks of learning to code, it might be surprising how many tiny steps become automatic and taken for granted. Tack on a couple more months and newcomers will think you’re speaking in an entirely different language because you’re explaining something requiring context they simply haven’t yet encountered. Add a few years and… yeesh.\nSomething that frustrated me when I first started is that code explanations often seem to be written in such a way that dismisses how difficult establishing the basics can be. I’m half-convinced that, for some folks, the trauma was so great that they have simply blocked it from memory. Code is intimidating enough, but if an instructor doesn’t make a conscious effort to empathize, students will question their ability to learn. The goal is empowerment, not intimidation.\nLive coding enforces a maximum speed in moving through exercises, which not only gives students more time to digest what you’re doing. It also provides more opportunities for them to ask questions on details you might find trivial, but only because you already suffered through them.\nI also think that the benefits of live coding extend to the instructor as well. I found myself answering questions that framed things in ways that I had not even considered, but were exactly how multiple participants saw the task. Additionally, I have a better sense of which concepts need to be covered in more detail, as they weren’t necessarily as intuitive for others as they were for me. On the flip-side, concepts with which I remember struggling may not be difficult at all for others to understand.\n\n… and now that we got the bloggyness of a blog post out of the way…\nHere is the workflow I used for the first session. The goal was to introduce the primary {dplyr} verbs, functions that accomplish tasks necessary in nearly every project. Between each section is an exercise using {ggplot}.\n\n# install.packages(\u0026quot;tidyverse\u0026quot;)\rlibrary(tidyverse)\r# install.packages(\u0026quot;gapminder\u0026quot;)\rlibrary(gapminder)\r# loads the gapminder data set\r## just to prettify printed tables when knitting\r# install.packages(\u0026quot;kableExtra\u0026quot;)\rlibrary(knitr)\rlibrary(kableExtra)\rWorkflow\r\n\r\rResources Up Front\rData Carpentry\r \n\n\rCheat Sheet\r\r\n\n\rPlotting\r\n\rCheat Sheet\r\r\n\rR Graph Catalog\r\r\n\rOur Data\rIn the following exercises, gm.data.frame will be used to demonstrate actions that use {base} R methods for data.frame operations while gm_df will be used to to demonstrate {tidyverse} methods for tibble operations.\ngm.data.frame \u0026lt;- as.data.frame(gapminder)\rgm_df \u0026lt;- gapminder\r\r\rtibble\rclass(gm.data.frame)\r## [1] \u0026quot;data.frame\u0026quot;\rclass(gm_df)\r## [1] \u0026quot;tbl_df\u0026quot; \u0026quot;tbl\u0026quot; \u0026quot;data.frame\u0026quot;\rtibbles are opinionated data.frames that keep everything that is helpful about data.frames, changes some of their quirks, and adds methods that makes them even more useful.\nPrinting gm.data.frame dumps the whole data set to the console, typically requiring head() to limit the output.\nPrinting\rhead(gm.data.frame)\r## country continent year lifeExp pop gdpPercap\r## 1 Afghanistan Asia 1952 28.801 8425333 779.4453\r## 2 Afghanistan Asia 1957 30.332 9240934 820.8530\r## 3 Afghanistan Asia 1962 31.997 10267083 853.1007\r## 4 Afghanistan Asia 1967 34.020 11537966 836.1971\r## 5 Afghanistan Asia 1972 36.088 13079460 739.9811\r## 6 Afghanistan Asia 1977 38.438 14880372 786.1134\rPrinting gm_df provides the dimensions, data type of each column, and only prints the first 10 rows.\ngm_df\r## # A tibble: 1,704 x 6\r## country continent year lifeExp pop gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan Asia 1952 28.8 8425333 779.\r## 2 Afghanistan Asia 1957 30.3 9240934 821.\r## 3 Afghanistan Asia 1962 32.0 10267083 853.\r## 4 Afghanistan Asia 1967 34.0 11537966 836.\r## 5 Afghanistan Asia 1972 36.1 13079460 740.\r## 6 Afghanistan Asia 1977 38.4 14880372 786.\r## 7 Afghanistan Asia 1982 39.9 12881816 978.\r## 8 Afghanistan Asia 1987 40.8 13867957 852.\r## 9 Afghanistan Asia 1992 41.7 16317921 649.\r## 10 Afghanistan Asia 1997 41.8 22227415 635.\r## # ... with 1,694 more rows\r\r\r%\u0026gt;%\r\nThe pipe (%\u0026gt;%) is used to chain operations together. Underneath the hood, it’s taking the value on the left-hand side of %\u0026gt;% and using it as the first argument of the function on the right-hand side of %\u0026gt;%.\nFor example, these 2 lines are doing the exact same thing.\nhead(gm_df)\r## # A tibble: 6 x 6\r## country continent year lifeExp pop gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan Asia 1952 28.8 8425333 779.\r## 2 Afghanistan Asia 1957 30.3 9240934 821.\r## 3 Afghanistan Asia 1962 32.0 10267083 853.\r## 4 Afghanistan Asia 1967 34.0 11537966 836.\r## 5 Afghanistan Asia 1972 36.1 13079460 740.\r## 6 Afghanistan Asia 1977 38.4 14880372 786.\rgm_df %\u0026gt;% head()\r## # A tibble: 6 x 6\r## country continent year lifeExp pop gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan Asia 1952 28.8 8425333 779.\r## 2 Afghanistan Asia 1957 30.3 9240934 821.\r## 3 Afghanistan Asia 1962 32.0 10267083 853.\r## 4 Afghanistan Asia 1967 34.0 11537966 836.\r## 5 Afghanistan Asia 1972 36.1 13079460 740.\r## 6 Afghanistan Asia 1977 38.4 14880372 786.\rFor simple operations involving 1 function, %\u0026gt;% is only (arguably) beneficial in that it improves readability as the flow of operations go from left to right.\n%\u0026gt;% become truly useful when you need to perform multiple operations in succession, which is the vast majority of data carpentry.\nAs an arbitrary example, let’s say that we want to select the head() (first 6 rows) of gm.data.frame and convert it to a tibble.\nWithout %\u0026gt;%, we can do this in a few ways.\nUse intermediate variables.\r\rget gm.data.frame’s head() and assign it to no_pipe_1\rconvert no_pipe_1 to a tibble with as_tibble() and assign it to no_pipe_2\r\r\rno_pipe_1 \u0026lt;- head(gm.data.frame)\rno_pipe_2 \u0026lt;- as_tibble(no_pipe_1)\rno_pipe_2\r## # A tibble: 6 x 6\r## country continent year lifeExp pop gdpPercap\r## * \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan Asia 1952 28.8 8425333 779.\r## 2 Afghanistan Asia 1957 30.3 9240934 821.\r## 3 Afghanistan Asia 1962 32.0 10267083 853.\r## 4 Afghanistan Asia 1967 34.0 11537966 836.\r## 5 Afghanistan Asia 1972 36.1 13079460 740.\r## 6 Afghanistan Asia 1977 38.4 14880372 786.\rNest gm.data.frame inside of head(), which is itself nested inside of as_tibble().\r\ras_tibble(head(gm.data.frame))\r## # A tibble: 6 x 6\r## country continent year lifeExp pop gdpPercap\r## * \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan Asia 1952 28.8 8425333 779.\r## 2 Afghanistan Asia 1957 30.3 9240934 821.\r## 3 Afghanistan Asia 1962 32.0 10267083 853.\r## 4 Afghanistan Asia 1967 34.0 11537966 836.\r## 5 Afghanistan Asia 1972 36.1 13079460 740.\r## 6 Afghanistan Asia 1977 38.4 14880372 786.\rWith %\u0026gt;%, we can chain these actions together in the order in which they occur, which is also the way we read English.\n\rHere, we do the same thing by:\r\rtaking gm_df\rpiping it to head() (keeping the top 6 rows)\rpiping it to as_tibble() (converting it to a tibble data frame)\r\r\rgm_df %\u0026gt;% head() %\u0026gt;% as_tibble()\r## # A tibble: 6 x 6\r## country continent year lifeExp pop gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan Asia 1952 28.8 8425333 779.\r## 2 Afghanistan Asia 1957 30.3 9240934 821.\r## 3 Afghanistan Asia 1962 32.0 10267083 853.\r## 4 Afghanistan Asia 1967 34.0 11537966 836.\r## 5 Afghanistan Asia 1972 36.1 13079460 740.\r## 6 Afghanistan Asia 1977 38.4 14880372 786.\rIn practice, it’s usually best to place each of the functions on a separate line as it facilitates debugging and further improves readability.\ngm_df %\u0026gt;%\ras_tibble() %\u0026gt;%\rhead()\r## # A tibble: 6 x 6\r## country continent year lifeExp pop gdpPercap\r## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 Afghanistan Asia 1952 28.8 8425333 779.\r## 2 Afghanistan Asia 1957 30.3 9240934 821.\r## 3 Afghanistan Asia 1962 32.0 10267083 853.\r## 4 Afghanistan Asia 1967 34.0 11537966 836.\r## 5 Afghanistan Asia 1972 36.1 13079460 740.\r## 6 Afghanistan Asia 1977 38.4 14880372 786.\rFrom here on, you’ll notice prettify(). This is only being used to print tables in a clean format when the document is knit()ted.\nI’m choosing to include it here as I often find myself reading similar pages where I come across a really effective way to format some output. I understand why the author chooses to set echo=FALSE, but it can be nice to see the underlying code without having to hunt through their GitHub.\ndata.frames will print a default maximum of 3 rows while tibbles will print a default maximum of 10 rows.\nprettify \u0026lt;- function(df, n = NULL, cols_changed = NULL, rows_changed = NULL){\rif(is.null(n)) n \u0026lt;- ifelse(is.tibble(df), 10, 3)\rpretty_df \u0026lt;- df %\u0026gt;%\rhead(n) %\u0026gt;%\rkable(format = \u0026quot;html\u0026quot;) %\u0026gt;%\rkable_styling(bootstrap_options = c(\u0026quot;striped\u0026quot;, \u0026quot;bordered\u0026quot;, \u0026quot;condensed\u0026quot;,\r\u0026quot;hover\u0026quot;, \u0026quot;responsive\u0026quot;),\rfull_width = FALSE)\rif(!is.null(cols_changed)){\rpretty_df \u0026lt;- pretty_df %\u0026gt;%\rcolumn_spec(cols_changed, bold = T, color = \u0026quot;black\u0026quot;, background = \u0026quot;#C8FAE3\u0026quot;)\r}\rif(!is.null(rows_changed)){\rpretty_df \u0026lt;- pretty_df %\u0026gt;%\rrow_spec(rows_changed, bold = T, color = \u0026quot;black\u0026quot;, background = \u0026quot;#C8FAE3\u0026quot;)\r}\rreturn(pretty_df)\r}\rgm.data.frame %\u0026gt;%\rprettify()\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rAfghanistan\r\rAsia\r\r1952\r\r28.801\r\r8425333\r\r779.4453\r\r\r\rAfghanistan\r\rAsia\r\r1957\r\r30.332\r\r9240934\r\r820.8530\r\r\r\rAfghanistan\r\rAsia\r\r1962\r\r31.997\r\r10267083\r\r853.1007\r\r\r\r\rgm_df %\u0026gt;%\rprettify()\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rAfghanistan\r\rAsia\r\r1952\r\r28.801\r\r8425333\r\r779.4453\r\r\r\rAfghanistan\r\rAsia\r\r1957\r\r30.332\r\r9240934\r\r820.8530\r\r\r\rAfghanistan\r\rAsia\r\r1962\r\r31.997\r\r10267083\r\r853.1007\r\r\r\rAfghanistan\r\rAsia\r\r1967\r\r34.020\r\r11537966\r\r836.1971\r\r\r\rAfghanistan\r\rAsia\r\r1972\r\r36.088\r\r13079460\r\r739.9811\r\r\r\rAfghanistan\r\rAsia\r\r1977\r\r38.438\r\r14880372\r\r786.1134\r\r\r\rAfghanistan\r\rAsia\r\r1982\r\r39.854\r\r12881816\r\r978.0114\r\r\r\rAfghanistan\r\rAsia\r\r1987\r\r40.822\r\r13867957\r\r852.3959\r\r\r\rAfghanistan\r\rAsia\r\r1992\r\r41.674\r\r16317921\r\r649.3414\r\r\r\rAfghanistan\r\rAsia\r\r1997\r\r41.763\r\r22227415\r\r635.3414\r\r\r\r\rSample Data\rYou’ll also see a toy data set for the introductory examples that start each section.\nsample_countries \u0026lt;- c(\u0026quot;Tunisia\u0026quot;, \u0026quot;Nicaragua\u0026quot;, \u0026quot;Singapore\u0026quot;, \u0026quot;Hungary\u0026quot;,\r\u0026quot;New Zealand\u0026quot;, \u0026quot;Nigeria\u0026quot;, \u0026quot;Brazil\u0026quot;, \u0026quot;Sri Lanka\u0026quot;,\r\u0026quot;Ireland\u0026quot;, \u0026quot;Australia\u0026quot;)\rsample_df \u0026lt;- gm_df %\u0026gt;%\rfilter(year == 2007,\rcountry %in% sample_countries)\rsample_df %\u0026gt;% prettify()\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rAustralia\r\rOceania\r\r2007\r\r81.235\r\r20434176\r\r34435.367\r\r\r\rBrazil\r\rAmericas\r\r2007\r\r72.390\r\r190010647\r\r9065.801\r\r\r\rHungary\r\rEurope\r\r2007\r\r73.338\r\r9956108\r\r18008.944\r\r\r\rIreland\r\rEurope\r\r2007\r\r78.885\r\r4109086\r\r40675.996\r\r\r\rNew Zealand\r\rOceania\r\r2007\r\r80.204\r\r4115771\r\r25185.009\r\r\r\rNicaragua\r\rAmericas\r\r2007\r\r72.899\r\r5675356\r\r2749.321\r\r\r\rNigeria\r\rAfrica\r\r2007\r\r46.859\r\r135031164\r\r2013.977\r\r\r\rSingapore\r\rAsia\r\r2007\r\r79.972\r\r4553009\r\r47143.180\r\r\r\rSri Lanka\r\rAsia\r\r2007\r\r72.396\r\r20378239\r\r3970.095\r\r\r\rTunisia\r\rAfrica\r\r2007\r\r73.923\r\r10276158\r\r7092.923\r\r\r\r\r\r\r“Tidy” Data\rIf you’re unsure of what “Tidy” data is actually describing and want to learn more, you can read Hadley Wickham’s article here. Otherwise, these graphics are likely the most concise explanation you’ll find.\nWith tibbles, %\u0026gt;%, and the concept of tidy data covered, let’s take a dive.\n{dplyr}\r{dplyr} provides a grammar of data manipulation and a set of verb functions that solve most common data carpentry challenges in a consistent fashion.\n\rglimpse()\rselect()\rfilter()\rarrange()\rmutate()\rsummarize()\rgroup_by()\r\r\rTaking a glimpse()\rIn addition to the summary(), dim()ensions, and str()ucture functions that can be used to inspect data, you can now use {dplyr}’s glimpse().\nsummary(gm.data.frame)\r## country continent year lifeExp ## Afghanistan: 12 Africa :624 Min. :1952 Min. :23.60 ## Albania : 12 Americas:300 1st Qu.:1966 1st Qu.:48.20 ## Algeria : 12 Asia :396 Median :1980 Median :60.71 ## Angola : 12 Europe :360 Mean :1980 Mean :59.47 ## Argentina : 12 Oceania : 24 3rd Qu.:1993 3rd Qu.:70.85 ## Australia : 12 Max. :2007 Max. :82.60 ## (Other) :1632 ## pop gdpPercap ## Min. :6.001e+04 Min. : 241.2 ## 1st Qu.:2.794e+06 1st Qu.: 1202.1 ## Median :7.024e+06 Median : 3531.8 ## Mean :2.960e+07 Mean : 7215.3 ## 3rd Qu.:1.959e+07 3rd Qu.: 9325.5 ## Max. :1.319e+09 Max. :113523.1 ## \rdim(gm.data.frame)\r## [1] 1704 6\rstr(gm.data.frame)\r## \u0026#39;data.frame\u0026#39;: 1704 obs. of 6 variables:\r## $ country : Factor w/ 142 levels \u0026quot;Afghanistan\u0026quot;,..: 1 1 1 1 1 1 1 1 1 1 ...\r## $ continent: Factor w/ 5 levels \u0026quot;Africa\u0026quot;,\u0026quot;Americas\u0026quot;,..: 3 3 3 3 3 3 3 3 3 3 ...\r## $ year : int 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...\r## $ lifeExp : num 28.8 30.3 32 34 36.1 ...\r## $ pop : int 8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...\r## $ gdpPercap: num 779 821 853 836 740 ...\rglimpse(gm_df)\r## Observations: 1,704\r## Variables: 6\r## $ country \u0026lt;fct\u0026gt; Afghanistan, Afghanistan, Afghanistan, Afghanistan, ...\r## $ continent \u0026lt;fct\u0026gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia...\r## $ year \u0026lt;int\u0026gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992...\r## $ lifeExp \u0026lt;dbl\u0026gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.8...\r## $ pop \u0026lt;int\u0026gt; 8425333, 9240934, 10267083, 11537966, 13079460, 1488...\r## $ gdpPercap \u0026lt;dbl\u0026gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 78...\r\r\rselect() columns\rQuick Example\rInitial Data\rsample_df %\u0026gt;%\rprettify()\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rAustralia\r\rOceania\r\r2007\r\r81.235\r\r20434176\r\r34435.367\r\r\r\rBrazil\r\rAmericas\r\r2007\r\r72.390\r\r190010647\r\r9065.801\r\r\r\rHungary\r\rEurope\r\r2007\r\r73.338\r\r9956108\r\r18008.944\r\r\r\rIreland\r\rEurope\r\r2007\r\r78.885\r\r4109086\r\r40675.996\r\r\r\rNew Zealand\r\rOceania\r\r2007\r\r80.204\r\r4115771\r\r25185.009\r\r\r\rNicaragua\r\rAmericas\r\r2007\r\r72.899\r\r5675356\r\r2749.321\r\r\r\rNigeria\r\rAfrica\r\r2007\r\r46.859\r\r135031164\r\r2013.977\r\r\r\rSingapore\r\rAsia\r\r2007\r\r79.972\r\r4553009\r\r47143.180\r\r\r\rSri Lanka\r\rAsia\r\r2007\r\r72.396\r\r20378239\r\r3970.095\r\r\r\rTunisia\r\rAfrica\r\r2007\r\r73.923\r\r10276158\r\r7092.923\r\r\r\r\r\rEnd Data\rsample_df %\u0026gt;%\rselect(country, pop) %\u0026gt;%\rprettify()\r\r\rcountry\r\rpop\r\r\r\r\r\rAustralia\r\r20434176\r\r\r\rBrazil\r\r190010647\r\r\r\rHungary\r\r9956108\r\r\r\rIreland\r\r4109086\r\r\r\rNew Zealand\r\r4115771\r\r\r\rNicaragua\r\r5675356\r\r\r\rNigeria\r\r135031164\r\r\r\rSingapore\r\r4553009\r\r\r\rSri Lanka\r\r20378239\r\r\r\rTunisia\r\r10276158\r\r\r\r\rThe select() family is used to choose columns to keep. You can use bare (unquoted) names.\n\rselect() columns by specific names.\r\rselect only gm_df’s country and pop columns\r\r\rgm_df %\u0026gt;%\rselect(country, year, pop) %\u0026gt;% # select columns by specific names\rprettify()\r\r\rcountry\r\ryear\r\rpop\r\r\r\r\r\rAfghanistan\r\r1952\r\r8425333\r\r\r\rAfghanistan\r\r1957\r\r9240934\r\r\r\rAfghanistan\r\r1962\r\r10267083\r\r\r\rAfghanistan\r\r1967\r\r11537966\r\r\r\rAfghanistan\r\r1972\r\r13079460\r\r\r\rAfghanistan\r\r1977\r\r14880372\r\r\r\rAfghanistan\r\r1982\r\r12881816\r\r\r\rAfghanistan\r\r1987\r\r13867957\r\r\r\rAfghanistan\r\r1992\r\r16317921\r\r\r\rAfghanistan\r\r1997\r\r22227415\r\r\r\r\r\rselect() a range of columns by name\r\rselect gm_df’s continent column and all columns from lifeExp to gdpPercap\r\r\rgm_df %\u0026gt;%\rselect(continent, lifeExp:gdpPercap) %\u0026gt;% # select columns name range\rprettify()\r\r\rcontinent\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rAsia\r\r28.801\r\r8425333\r\r779.4453\r\r\r\rAsia\r\r30.332\r\r9240934\r\r820.8530\r\r\r\rAsia\r\r31.997\r\r10267083\r\r853.1007\r\r\r\rAsia\r\r34.020\r\r11537966\r\r836.1971\r\r\r\rAsia\r\r36.088\r\r13079460\r\r739.9811\r\r\r\rAsia\r\r38.438\r\r14880372\r\r786.1134\r\r\r\rAsia\r\r39.854\r\r12881816\r\r978.0114\r\r\r\rAsia\r\r40.822\r\r13867957\r\r852.3959\r\r\r\rAsia\r\r41.674\r\r16317921\r\r649.3414\r\r\r\rAsia\r\r41.763\r\r22227415\r\r635.3414\r\r\r\r\r\rdeselect() a column with -\r\rselect() all of gm_df’s columns except lifeExp\r\r\rgm_df %\u0026gt;%\rselect(-lifeExp) %\u0026gt;% # deselect column by name\rprettify()\r\r\rcountry\r\rcontinent\r\ryear\r\rpop\r\rgdpPercap\r\r\r\r\r\rAfghanistan\r\rAsia\r\r1952\r\r8425333\r\r779.4453\r\r\r\rAfghanistan\r\rAsia\r\r1957\r\r9240934\r\r820.8530\r\r\r\rAfghanistan\r\rAsia\r\r1962\r\r10267083\r\r853.1007\r\r\r\rAfghanistan\r\rAsia\r\r1967\r\r11537966\r\r836.1971\r\r\r\rAfghanistan\r\rAsia\r\r1972\r\r13079460\r\r739.9811\r\r\r\rAfghanistan\r\rAsia\r\r1977\r\r14880372\r\r786.1134\r\r\r\rAfghanistan\r\rAsia\r\r1982\r\r12881816\r\r978.0114\r\r\r\rAfghanistan\r\rAsia\r\r1987\r\r13867957\r\r852.3959\r\r\r\rAfghanistan\r\rAsia\r\r1992\r\r16317921\r\r649.3414\r\r\r\rAfghanistan\r\rAsia\r\r1997\r\r22227415\r\r635.3414\r\r\r\r\r\rdeselect() a range of columns by name\r\rselect() all of gm_df’s columns except those between lifeExp and gdpPercap\r\r\rgm_df %\u0026gt;%\rselect(-c(lifeExp:gdpPercap)) %\u0026gt;% # deselect column by name range\rprettify()\r\r\rcountry\r\rcontinent\r\ryear\r\r\r\r\r\rAfghanistan\r\rAsia\r\r1952\r\r\r\rAfghanistan\r\rAsia\r\r1957\r\r\r\rAfghanistan\r\rAsia\r\r1962\r\r\r\rAfghanistan\r\rAsia\r\r1967\r\r\r\rAfghanistan\r\rAsia\r\r1972\r\r\r\rAfghanistan\r\rAsia\r\r1977\r\r\r\rAfghanistan\r\rAsia\r\r1982\r\r\r\rAfghanistan\r\rAsia\r\r1987\r\r\r\rAfghanistan\r\rAsia\r\r1992\r\r\r\rAfghanistan\r\rAsia\r\r1997\r\r\r\r\r\rselect() column by index\r\rselect() gm_df’s 4th column\r\r\rgm_df %\u0026gt;%\rselect(4) %\u0026gt;% # select column by index\rprettify()\r\r\rlifeExp\r\r\r\r\r\r28.801\r\r\r\r30.332\r\r\r\r31.997\r\r\r\r34.020\r\r\r\r36.088\r\r\r\r38.438\r\r\r\r39.854\r\r\r\r40.822\r\r\r\r41.674\r\r\r\r41.763\r\r\r\r\r\rdeselect() a column by index\r\rselect() all of gm_df’s columns except for the 4th column\r\r\rgm_df %\u0026gt;%\rselect(-4) %\u0026gt;% # deselect column by index\rprettify()\r\r\rcountry\r\rcontinent\r\ryear\r\rpop\r\rgdpPercap\r\r\r\r\r\rAfghanistan\r\rAsia\r\r1952\r\r8425333\r\r779.4453\r\r\r\rAfghanistan\r\rAsia\r\r1957\r\r9240934\r\r820.8530\r\r\r\rAfghanistan\r\rAsia\r\r1962\r\r10267083\r\r853.1007\r\r\r\rAfghanistan\r\rAsia\r\r1967\r\r11537966\r\r836.1971\r\r\r\rAfghanistan\r\rAsia\r\r1972\r\r13079460\r\r739.9811\r\r\r\rAfghanistan\r\rAsia\r\r1977\r\r14880372\r\r786.1134\r\r\r\rAfghanistan\r\rAsia\r\r1982\r\r12881816\r\r978.0114\r\r\r\rAfghanistan\r\rAsia\r\r1987\r\r13867957\r\r852.3959\r\r\r\rAfghanistan\r\rAsia\r\r1992\r\r16317921\r\r649.3414\r\r\r\rAfghanistan\r\rAsia\r\r1997\r\r22227415\r\r635.3414\r\r\r\r\r\rdeselect() a range of columns by index\r\rselect() all of gm_df’s columns except those between the 3rd and 5th columns\r\r\rgm_df %\u0026gt;%\rselect(-c(3:5)) %\u0026gt;% # deselect columns by index range\rprettify()\r\r\rcountry\r\rcontinent\r\rgdpPercap\r\r\r\r\r\rAfghanistan\r\rAsia\r\r779.4453\r\r\r\rAfghanistan\r\rAsia\r\r820.8530\r\r\r\rAfghanistan\r\rAsia\r\r853.1007\r\r\r\rAfghanistan\r\rAsia\r\r836.1971\r\r\r\rAfghanistan\r\rAsia\r\r739.9811\r\r\r\rAfghanistan\r\rAsia\r\r786.1134\r\r\r\rAfghanistan\r\rAsia\r\r978.0114\r\r\r\rAfghanistan\r\rAsia\r\r852.3959\r\r\r\rAfghanistan\r\rAsia\r\r649.3414\r\r\r\rAfghanistan\r\rAsia\r\r635.3414\r\r\r\r\r\r\rggplot() Exercise 1\r{ggplot2} is monster of a package used for data visualization that follows The Grammar of Graphics.\n{ggplot2} takes R’s powerful graphics capabilities and makes them more accessible by taking care of many plotting tasks that are often tedious, while still allowing for lower-level customization.\n\rBasic Setup\r\rggplot(your data, aes(x =x values, y =y values)) + geom_boxplot() the type of plot geometry desired\nSteps\nUsing gm_df, select the lifeExp column\rPipe (%\u0026gt;%) the result to ggplot()\rSelect the plot’s aes()thetic values\r\rlifeExp for the x values\r\ra histogram’s y are counts of its x values, so we don’t provide them here\r\r\rAdd geom_histogram() as the geometry of the plot\r\rgm_df %\u0026gt;% # data frame: Data\rselect(lifeExp) %\u0026gt;% # columns to keep: Data\rggplot(aes(x = lifeExp)) + # x values: Aesthetics\rgeom_histogram() # histogram: Geometries\r\rFigure 1: Figure 1\r\r\r\rfilter() Rows\rQuick Example\rInitial Data\rsample_df %\u0026gt;%\rselect(country, lifeExp) %\u0026gt;%\rprettify()\r\r\rcountry\r\rlifeExp\r\r\r\r\r\rAustralia\r\r81.235\r\r\r\rBrazil\r\r72.390\r\r\r\rHungary\r\r73.338\r\r\r\rIreland\r\r78.885\r\r\r\rNew Zealand\r\r80.204\r\r\r\rNicaragua\r\r72.899\r\r\r\rNigeria\r\r46.859\r\r\r\rSingapore\r\r79.972\r\r\r\rSri Lanka\r\r72.396\r\r\r\rTunisia\r\r73.923\r\r\r\r\r\rEnd Data\rsample_df %\u0026gt;%\rselect(country, lifeExp) %\u0026gt;%\rfilter(lifeExp \u0026gt; 75) %\u0026gt;%\rprettify(cols_changed = 2)\r\r\rcountry\r\rlifeExp\r\r\r\r\r\rAustralia\r\r81.235\r\r\r\rIreland\r\r78.885\r\r\r\rNew Zealand\r\r80.204\r\r\r\rSingapore\r\r79.972\r\r\r\r\rUse filter() to select rows using logic. Rows where a logical expression returns TRUE are kept and others are dropped.\n\rfilter() rows where numeric() values are greater or lesser than another value\r\rfilter() gm_df to only keep rows where gdpPercap \u0026lt; 500\r\r\rgm_df %\u0026gt;%\rfilter(gdpPercap \u0026lt; 500) %\u0026gt;%\rprettify(cols_changed = 6)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rBurundi\r\rAfrica\r\r1952\r\r39.031\r\r2445618\r\r339.2965\r\r\r\rBurundi\r\rAfrica\r\r1957\r\r40.533\r\r2667518\r\r379.5646\r\r\r\rBurundi\r\rAfrica\r\r1962\r\r42.045\r\r2961915\r\r355.2032\r\r\r\rBurundi\r\rAfrica\r\r1967\r\r43.548\r\r3330989\r\r412.9775\r\r\r\rBurundi\r\rAfrica\r\r1972\r\r44.057\r\r3529983\r\r464.0995\r\r\r\rBurundi\r\rAfrica\r\r1997\r\r45.326\r\r6121610\r\r463.1151\r\r\r\rBurundi\r\rAfrica\r\r2002\r\r47.360\r\r7021078\r\r446.4035\r\r\r\rBurundi\r\rAfrica\r\r2007\r\r49.580\r\r8390505\r\r430.0707\r\r\r\rCambodia\r\rAsia\r\r1952\r\r39.417\r\r4693836\r\r368.4693\r\r\r\rCambodia\r\rAsia\r\r1957\r\r41.366\r\r5322536\r\r434.0383\r\r\r\r\r\rfilter() rows using multiple logical expressions where all must be TRUE\r\rfilter() gm_df to only keep rows where year \u0026gt; 1990 and lifeExp \u0026lt; 40\r, and \u0026amp; are evaluated identically in filter()\r\r\rgm_df %\u0026gt;%\rfilter(year \u0026gt; 1990, lifeExp \u0026lt; 40) %\u0026gt;%\rprettify(cols_changed = 3:4)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rRwanda\r\rAfrica\r\r1992\r\r23.599\r\r7290203\r\r737.0686\r\r\r\rRwanda\r\rAfrica\r\r1997\r\r36.087\r\r7212583\r\r589.9445\r\r\r\rSierra Leone\r\rAfrica\r\r1992\r\r38.333\r\r4260884\r\r1068.6963\r\r\r\rSierra Leone\r\rAfrica\r\r1997\r\r39.897\r\r4578212\r\r574.6482\r\r\r\rSomalia\r\rAfrica\r\r1992\r\r39.658\r\r6099799\r\r926.9603\r\r\r\rSwaziland\r\rAfrica\r\r2007\r\r39.613\r\r1133066\r\r4513.4806\r\r\r\rZambia\r\rAfrica\r\r2002\r\r39.193\r\r10595811\r\r1071.6139\r\r\r\rZimbabwe\r\rAfrica\r\r2002\r\r39.989\r\r11926563\r\r672.0386\r\r\r\r\r\rfilter() rows using multiple logical expressions where one must be TRUE\r\rfilter() gm_df to only keep rows where pop \u0026lt; 10000 or gdpPercap \u0026gt; 100000\r| means or\r\r\rgm_df %\u0026gt;%\rfilter(pop \u0026lt; 10000 | gdpPercap \u0026gt; 100000) %\u0026gt;%\rprettify(cols_changed = 5:6)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rKuwait\r\rAsia\r\r1952\r\r55.565\r\r160000\r\r108382.4\r\r\r\rKuwait\r\rAsia\r\r1957\r\r58.033\r\r212846\r\r113523.1\r\r\r\rKuwait\r\rAsia\r\r1972\r\r67.712\r\r841934\r\r109347.9\r\r\r\r\r\rfilter() rows using a string\r\rfilter() gm_df to only keep rows where year is 1999 and continent is \u0026quot;Europe\u0026quot;\r== means is equal to\r\r\rgm_df %\u0026gt;%\rfilter(year == 1997 \u0026amp; continent == \u0026quot;Europe\u0026quot;) %\u0026gt;%\rprettify(cols_changed = 2:3)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rAlbania\r\rEurope\r\r1997\r\r72.950\r\r3428038\r\r3193.055\r\r\r\rAustria\r\rEurope\r\r1997\r\r77.510\r\r8069876\r\r29095.921\r\r\r\rBelgium\r\rEurope\r\r1997\r\r77.530\r\r10199787\r\r27561.197\r\r\r\rBosnia and Herzegovina\r\rEurope\r\r1997\r\r73.244\r\r3607000\r\r4766.356\r\r\r\rBulgaria\r\rEurope\r\r1997\r\r70.320\r\r8066057\r\r5970.389\r\r\r\rCroatia\r\rEurope\r\r1997\r\r73.680\r\r4444595\r\r9875.605\r\r\r\rCzech Republic\r\rEurope\r\r1997\r\r74.010\r\r10300707\r\r16048.514\r\r\r\rDenmark\r\rEurope\r\r1997\r\r76.110\r\r5283663\r\r29804.346\r\r\r\rFinland\r\rEurope\r\r1997\r\r77.130\r\r5134406\r\r23723.950\r\r\r\rFrance\r\rEurope\r\r1997\r\r78.640\r\r58623428\r\r25889.785\r\r\r\r\r\r\rggplot() Exercise 2\rSteps\nUsing gm_df, select the continent, country, and gdpPercap columns\rfilter() the rows to only keep those where continent == \u0026quot;Oceania\u0026quot;\rPipe (%\u0026gt;%) the result to ggplot()\rSelect the plot’s aes()thetic values\r\rcountry for the x values\rgdpPercap for the y values\r\rAdd geom_boxplot() as the geometry of the plot\r\rgm_df %\u0026gt;% # data frame: Data\rselect(continent, country, gdpPercap) %\u0026gt;% # columns to keep: Data\rfilter(continent == \u0026quot;Oceania\u0026quot;) %\u0026gt;% # rows to keep: Data\rggplot(aes(x = country, y = gdpPercap)) + # x and y values: Aesthetics\rgeom_boxplot() # box plot: Geometries\r\r\rmutate() Columns\rQuick Example\rInitial Data\rsample_df %\u0026gt;%\rselect(country, pop) %\u0026gt;%\rprettify()\r\r\rcountry\r\rpop\r\r\r\r\r\rAustralia\r\r20434176\r\r\r\rBrazil\r\r190010647\r\r\r\rHungary\r\r9956108\r\r\r\rIreland\r\r4109086\r\r\r\rNew Zealand\r\r4115771\r\r\r\rNicaragua\r\r5675356\r\r\r\rNigeria\r\r135031164\r\r\r\rSingapore\r\r4553009\r\r\r\rSri Lanka\r\r20378239\r\r\r\rTunisia\r\r10276158\r\r\r\r\r\rEnd Data\rsample_df %\u0026gt;%\rselect(country, pop) %\u0026gt;%\rmutate(pop_in_thousands = pop / 1000) %\u0026gt;%\rprettify(cols_changed = 3)\r\r\rcountry\r\rpop\r\rpop_in_thousands\r\r\r\r\r\rAustralia\r\r20434176\r\r20434.176\r\r\r\rBrazil\r\r190010647\r\r190010.647\r\r\r\rHungary\r\r9956108\r\r9956.108\r\r\r\rIreland\r\r4109086\r\r4109.086\r\r\r\rNew Zealand\r\r4115771\r\r4115.771\r\r\r\rNicaragua\r\r5675356\r\r5675.356\r\r\r\rNigeria\r\r135031164\r\r135031.164\r\r\r\rSingapore\r\r4553009\r\r4553.009\r\r\r\rSri Lanka\r\r20378239\r\r20378.239\r\r\r\rTunisia\r\r10276158\r\r10276.158\r\r\r\r\rUse mutate() to manipulate column values and create new columns.\nIn order to mutate() a column, use the name of the column you are manipulating and set its value using =.\nHere’s a silly example:\n\rAdd a new column to gm_df\r\rmutate() gm_df to create a column named planet and set its value to \u0026quot;Earth\u0026quot;\r\r\rgm_df %\u0026gt;%\rmutate(planet = \u0026quot;Earth\u0026quot;) %\u0026gt;%\rprettify(cols_changed = 7)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\rplanet\r\r\r\r\r\rAfghanistan\r\rAsia\r\r1952\r\r28.801\r\r8425333\r\r779.4453\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1957\r\r30.332\r\r9240934\r\r820.8530\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1962\r\r31.997\r\r10267083\r\r853.1007\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1967\r\r34.020\r\r11537966\r\r836.1971\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1972\r\r36.088\r\r13079460\r\r739.9811\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1977\r\r38.438\r\r14880372\r\r786.1134\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1982\r\r39.854\r\r12881816\r\r978.0114\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1987\r\r40.822\r\r13867957\r\r852.3959\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1992\r\r41.674\r\r16317921\r\r649.3414\r\rEarth\r\r\r\rAfghanistan\r\rAsia\r\r1997\r\r41.763\r\r22227415\r\r635.3414\r\rEarth\r\r\r\r\rSince we have gdpPercap and pop, we can calculate the values for a total_GDP column.\n\rmutate() gm_df to set the results of a calculation on each row to a new column\r\rmultiply pop * gdpPercap and assign the result to total_GDP inside mutate()\r\r\rgm_df %\u0026gt;%\rmutate(total_GDP = pop * gdpPercap) %\u0026gt;%\rprettify(cols_changed = 7)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\rtotal_GDP\r\r\r\r\r\rAfghanistan\r\rAsia\r\r1952\r\r28.801\r\r8425333\r\r779.4453\r\r6567086330\r\r\r\rAfghanistan\r\rAsia\r\r1957\r\r30.332\r\r9240934\r\r820.8530\r\r7585448670\r\r\r\rAfghanistan\r\rAsia\r\r1962\r\r31.997\r\r10267083\r\r853.1007\r\r8758855797\r\r\r\rAfghanistan\r\rAsia\r\r1967\r\r34.020\r\r11537966\r\r836.1971\r\r9648014150\r\r\r\rAfghanistan\r\rAsia\r\r1972\r\r36.088\r\r13079460\r\r739.9811\r\r9678553274\r\r\r\rAfghanistan\r\rAsia\r\r1977\r\r38.438\r\r14880372\r\r786.1134\r\r11697659231\r\r\r\rAfghanistan\r\rAsia\r\r1982\r\r39.854\r\r12881816\r\r978.0114\r\r12598563401\r\r\r\rAfghanistan\r\rAsia\r\r1987\r\r40.822\r\r13867957\r\r852.3959\r\r11820990309\r\r\r\rAfghanistan\r\rAsia\r\r1992\r\r41.674\r\r16317921\r\r649.3414\r\r10595901589\r\r\r\rAfghanistan\r\rAsia\r\r1997\r\r41.763\r\r22227415\r\r635.3414\r\r14121995875\r\r\r\r\rTypically, mutate() is used to perform operations across columns in each individual row. You can also use summary functions to perform operations on individual columns (acting as vectors) that result in a vector that can be assigned to a column.\nMakes sense, right??\nLet’s calculate the z-score of each gdpPercap value for a specific year.\n\\[ z = \\frac {x_i -\\mu_x} {\\sigma_x}\\]\n\r\\(x\\) = gdpPercap\r\\(\\mu_x\\) = the mean of \\(x\\) = mean(gdpPercap)\r\\(\\sigma_x\\) = the standard deviation of x = sd(gdpPercap)\n\rUse a summary function to perform a a calculation involving summary statistics of a column\r\rsubtract mean(gdpPercap) from gdpPercap\rdivide the result by sd(gdpPercap)\rset the results as the values of a new column called gdp_per_cap_z_score\r\r\rgm_df %\u0026gt;%\rfilter(year == 1977) %\u0026gt;%\rmutate(gdp_per_cap_z_score = (gdpPercap - mean(gdpPercap)) / sd(gdpPercap)) %\u0026gt;%\rprettify(cols_changed = 7)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\rgdp_per_cap_z_score\r\r\r\r\r\rAfghanistan\r\rAsia\r\r1977\r\r38.438\r\r14880372\r\r786.1134\r\r-0.7805156\r\r\r\rAlbania\r\rEurope\r\r1977\r\r68.930\r\r2509048\r\r3533.0039\r\r-0.4520380\r\r\r\rAlgeria\r\rAfrica\r\r1977\r\r58.014\r\r17152804\r\r4910.4168\r\r-0.2873247\r\r\r\rAngola\r\rAfrica\r\r1977\r\r39.483\r\r6162675\r\r3008.6474\r\r-0.5147414\r\r\r\rArgentina\r\rAmericas\r\r1977\r\r68.481\r\r26983828\r\r10079.0267\r\r0.3307461\r\r\r\rAustralia\r\rOceania\r\r1977\r\r73.490\r\r14074100\r\r18334.1975\r\r1.3179128\r\r\r\rAustria\r\rEurope\r\r1977\r\r72.170\r\r7568430\r\r19749.4223\r\r1.4871476\r\r\r\rBahrain\r\rAsia\r\r1977\r\r65.593\r\r297410\r\r19340.1020\r\r1.4382004\r\r\r\rBangladesh\r\rAsia\r\r1977\r\r46.923\r\r80428306\r\r659.8772\r\r-0.7956111\r\r\r\rBelgium\r\rEurope\r\r1977\r\r72.800\r\r9821800\r\r19117.9745\r\r1.4116381\r\r\r\r\rHere are other functions that can be used similarly:\n\r\rSummary Functions\r\r\r\r\rfirst()\rmin()\r\rlast()\rmax()\r\rnth()\rmean()\r\rn()\rmedian()\r\rn_distinct()\rvar()\r\rIQR()\rsd()\r\r\r\r\r\rggplot() Exercise 3\rSteps\nUsing gm_df, select() country, year, and gdpPercap\rfilter() the rows to keep only those where country is \u0026quot;Korea, Rep.\u0026quot;, \u0026quot;Korea, Dem. Rep.\u0026quot;, \u0026quot;Japan\u0026quot;, or \u0026quot;China\u0026quot;\rPipe the result to ggplot()\rSelect the plot’s aes()thetic values\r\ryear for the x values\rgdpPercap for the y values\rcountry for the color values\r\r\r\rAdd geom_line() as the geometry of the plot\rAdd a title to the plot with labs()\r\rgm_df %\u0026gt;%\rfilter(country %in% c(\u0026quot;Korea, Rep.\u0026quot;, \u0026quot;Korea, Dem. Rep.\u0026quot;, \u0026quot;Japan\u0026quot;, \u0026quot;China\u0026quot;)) %\u0026gt;%\rmutate(total_GDP = pop * gdpPercap) %\u0026gt;%\rggplot(aes(x = year, y = gdpPercap, color = country)) +\rgeom_line() +\rlabs(title = \u0026quot;GDP Over Time\u0026quot;)\r\r\rarrange() Rows\rQuick Example\rInitial Data\rsample_df %\u0026gt;%\rselect(country, gdpPercap) %\u0026gt;%\rprettify()\r\r\rcountry\r\rgdpPercap\r\r\r\r\r\rAustralia\r\r34435.367\r\r\r\rBrazil\r\r9065.801\r\r\r\rHungary\r\r18008.944\r\r\r\rIreland\r\r40675.996\r\r\r\rNew Zealand\r\r25185.009\r\r\r\rNicaragua\r\r2749.321\r\r\r\rNigeria\r\r2013.977\r\r\r\rSingapore\r\r47143.180\r\r\r\rSri Lanka\r\r3970.095\r\r\r\rTunisia\r\r7092.923\r\r\r\r\r\rEnd Data\rsample_df %\u0026gt;%\rselect(country, gdpPercap)%\u0026gt;%\rarrange(gdpPercap) %\u0026gt;%\rprettify(cols_changed = 2)\r\r\rcountry\r\rgdpPercap\r\r\r\r\r\rNigeria\r\r2013.977\r\r\r\rNicaragua\r\r2749.321\r\r\r\rSri Lanka\r\r3970.095\r\r\r\rTunisia\r\r7092.923\r\r\r\rBrazil\r\r9065.801\r\r\r\rHungary\r\r18008.944\r\r\r\rNew Zealand\r\r25185.009\r\r\r\rAustralia\r\r34435.367\r\r\r\rIreland\r\r40675.996\r\r\r\rSingapore\r\r47143.180\r\r\r\r\rUse arrange() to sort rows.\n\rarrange() by ascending number (smallest to largest)\r\rarrange() gm_df’s pop column so that smallest populations are on top\r\r\rgm_df %\u0026gt;%\rarrange(pop) %\u0026gt;%\rprettify(cols_changed = 5)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rSao Tome and Principe\r\rAfrica\r\r1952\r\r46.471\r\r60011\r\r879.5836\r\r\r\rSao Tome and Principe\r\rAfrica\r\r1957\r\r48.945\r\r61325\r\r860.7369\r\r\r\rDjibouti\r\rAfrica\r\r1952\r\r34.812\r\r63149\r\r2669.5295\r\r\r\rSao Tome and Principe\r\rAfrica\r\r1962\r\r51.893\r\r65345\r\r1071.5511\r\r\r\rSao Tome and Principe\r\rAfrica\r\r1967\r\r54.425\r\r70787\r\r1384.8406\r\r\r\rDjibouti\r\rAfrica\r\r1957\r\r37.328\r\r71851\r\r2864.9691\r\r\r\rSao Tome and Principe\r\rAfrica\r\r1972\r\r56.480\r\r76595\r\r1532.9853\r\r\r\rSao Tome and Principe\r\rAfrica\r\r1977\r\r58.550\r\r86796\r\r1737.5617\r\r\r\rDjibouti\r\rAfrica\r\r1962\r\r39.693\r\r89898\r\r3020.9893\r\r\r\rSao Tome and Principe\r\rAfrica\r\r1982\r\r60.351\r\r98593\r\r1890.2181\r\r\r\r\r\rarrange() by desc() number (largest to smallest)\r\rarrange() the lifeExp column so that largest values are on top\r\r\rgm_df %\u0026gt;%\rarrange(desc(lifeExp)) %\u0026gt;%\rprettify(cols_changed = 4)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rJapan\r\rAsia\r\r2007\r\r82.603\r\r127467972\r\r31656.07\r\r\r\rHong Kong, China\r\rAsia\r\r2007\r\r82.208\r\r6980412\r\r39724.98\r\r\r\rJapan\r\rAsia\r\r2002\r\r82.000\r\r127065841\r\r28604.59\r\r\r\rIceland\r\rEurope\r\r2007\r\r81.757\r\r301931\r\r36180.79\r\r\r\rSwitzerland\r\rEurope\r\r2007\r\r81.701\r\r7554661\r\r37506.42\r\r\r\rHong Kong, China\r\rAsia\r\r2002\r\r81.495\r\r6762476\r\r30209.02\r\r\r\rAustralia\r\rOceania\r\r2007\r\r81.235\r\r20434176\r\r34435.37\r\r\r\rSpain\r\rEurope\r\r2007\r\r80.941\r\r40448191\r\r28821.06\r\r\r\rSweden\r\rEurope\r\r2007\r\r80.884\r\r9031088\r\r33859.75\r\r\r\rIsrael\r\rAsia\r\r2007\r\r80.745\r\r6426679\r\r25523.28\r\r\r\r\r\rarrange() alphabetically\r\rfilter() gm_df to keep only those rows where year == 2007 and continent == \u0026quot;Americas\u0026quot;\rarrange() the country column alphabetically\r\r\rgm_df %\u0026gt;%\rfilter(year == 2007, continent == \u0026quot;Americas\u0026quot;) %\u0026gt;%\rarrange(country) %\u0026gt;%\rprettify(cols_changed = 2:3)\r\r\rcountry\r\rcontinent\r\ryear\r\rlifeExp\r\rpop\r\rgdpPercap\r\r\r\r\r\rArgentina\r\rAmericas\r\r2007\r\r75.320\r\r40301927\r\r12779.380\r\r\r\rBolivia\r\rAmericas\r\r2007\r\r65.554\r\r9119152\r\r3822.137\r\r\r\rBrazil\r\rAmericas\r\r2007\r\r72.390\r\r190010647\r\r9065.801\r\r\r\rCanada\r\rAmericas\r\r2007\r\r80.653\r\r33390141\r\r36319.235\r\r\r\rChile\r\rAmericas\r\r2007\r\r78.553\r\r16284741\r\r13171.639\r\r\r\rColombia\r\rAmericas\r\r2007\r\r72.889\r\r44227550\r\r7006.580\r\r\r\rCosta Rica\r\rAmericas\r\r2007\r\r78.782\r\r4133884\r\r9645.061\r\r\r\rCuba\r\rAmericas\r\r2007\r\r78.273\r\r11416987\r\r8948.103\r\r\r\rDominican Republic\r\rAmericas\r\r2007\r\r72.235\r\r9319622\r\r6025.375\r\r\r\rEcuador\r\rAmericas\r\r2007\r\r74.994\r\r13755680\r\r6873.262\r\r\r\r\r\r\r\rgroup_by() for Grouped Data\rQuick Example\rInitial Data\rsample_df %\u0026gt;%\rselect(country, continent, pop) %\u0026gt;%\rprettify()\r\r\rcountry\r\rcontinent\r\rpop\r\r\r\r\r\rAustralia\r\rOceania\r\r20434176\r\r\r\rBrazil\r\rAmericas\r\r190010647\r\r\r\rHungary\r\rEurope\r\r9956108\r\r\r\rIreland\r\rEurope\r\r4109086\r\r\r\rNew Zealand\r\rOceania\r\r4115771\r\r\r\rNicaragua\r\rAmericas\r\r5675356\r\r\r\rNigeria\r\rAfrica\r\r135031164\r\r\r\rSingapore\r\rAsia\r\r4553009\r\r\r\rSri Lanka\r\rAsia\r\r20378239\r\r\r\rTunisia\r\rAfrica\r\r10276158\r\r\r\r\r\rEnd Data\rsample_df %\u0026gt;%\rselect(country, continent, pop) %\u0026gt;%\rgroup_by(continent) %\u0026gt;%\rmutate(pop_by_continent = sum(pop)) %\u0026gt;%\rungroup() %\u0026gt;%\rarrange(pop_by_continent) %\u0026gt;%\rprettify(cols_changed = 4)\r\r\rcountry\r\rcontinent\r\rpop\r\rpop_by_continent\r\r\r\r\r\rHungary\r\rEurope\r\r9956108\r\r14065194\r\r\r\rIreland\r\rEurope\r\r4109086\r\r14065194\r\r\r\rAustralia\r\rOceania\r\r20434176\r\r24549947\r\r\r\rNew Zealand\r\rOceania\r\r4115771\r\r24549947\r\r\r\rSingapore\r\rAsia\r\r4553009\r\r24931248\r\r\r\rSri Lanka\r\rAsia\r\r20378239\r\r24931248\r\r\r\rNigeria\r\rAfrica\r\r135031164\r\r145307322\r\r\r\rTunisia\r\rAfrica\r\r10276158\r\r145307322\r\r\r\rBrazil\r\rAmericas\r\r190010647\r\r195686003\r\r\r\rNicaragua\r\rAmericas\r\r5675356\r\r195686003\r\r\r\r\rgroup_by() allows us to group rows together based on column values.\nLet’s say we wanted to compute summary values for each country for all years.\n\rCalculate the mean_gdp_per_cap of each country with group_by()\r\rtake gm_df and group_by() country to group rows of the same country together\ruse mean() to calculate the mean_gdp_per_cap\rungroup() the rows\r\ra habit you want\r\rkeep only those rows with distinct() combinations of country and mean_gdp_per_cap\r\rdistinct()’s default is to only keep columns used as arguments\r\r\r\rgm_df %\u0026gt;%\rgroup_by(country) %\u0026gt;%\rmutate(mean_gdp_per_cap = median(gdpPercap)) %\u0026gt;% ungroup() %\u0026gt;%\rdistinct(country, mean_gdp_per_cap) %\u0026gt;% prettify(cols_changed = 2)\r\r\rcountry\r\rmean_gdp_per_cap\r\r\r\r\r\rAfghanistan\r\r803.4832\r\r\r\rAlbania\r\r3253.2384\r\r\r\rAlgeria\r\r4853.8559\r\r\r\rAngola\r\r3264.6288\r\r\r\rArgentina\r\r9068.7844\r\r\r\rAustralia\r\r18905.6034\r\r\r\rAustria\r\r20673.2530\r\r\r\rBahrain\r\r18779.8016\r\r\r\rBangladesh\r\r703.7638\r\r\r\rBelgium\r\r20048.9102\r\r\r\r\r\r\rggplot() Exercise 4\rSteps\nUsing gm_df, group_by() the continent and year\rmutate() to add a column called mean_gdp for the average GDP of each continent\rungroup() the data, because this is a habit that will save you headaches later\rKeep only distinct() combinations of continent, year, and mean_gdp\rPipe the result to ggplot()\rSelect the plot’s aes()thetic values\r\ryear for the x values\rmean_gdp for the y values\rcontinent for the color values\r\rAdd geom_line() as the geometry of the plot\rAdd a title and a caption (for the source of the data) to the plot with labs()\r\rgm_df %\u0026gt;%\rgroup_by(year, continent) %\u0026gt;%\rmutate(mean_gdp = mean(gdpPercap)) %\u0026gt;%\rungroup() %\u0026gt;%\rdistinct(continent, year, mean_gdp) %\u0026gt;%\rggplot(aes(x = year, y = mean_gdp, color = continent)) +\rgeom_line() +\rlabs(title = \u0026quot;Mean GDPs by Continent Over Time\u0026quot;,\rcaption = \u0026quot;Source: Free material from www.gapminder.org\u0026quot;)\r\r\rsummarize()\rQuick Example\rInitial Data\rsample_df %\u0026gt;%\rselect(country, continent, lifeExp, pop) %\u0026gt;%\rprettify()\r\r\rcountry\r\rcontinent\r\rlifeExp\r\rpop\r\r\r\r\r\rAustralia\r\rOceania\r\r81.235\r\r20434176\r\r\r\rBrazil\r\rAmericas\r\r72.390\r\r190010647\r\r\r\rHungary\r\rEurope\r\r73.338\r\r9956108\r\r\r\rIreland\r\rEurope\r\r78.885\r\r4109086\r\r\r\rNew Zealand\r\rOceania\r\r80.204\r\r4115771\r\r\r\rNicaragua\r\rAmericas\r\r72.899\r\r5675356\r\r\r\rNigeria\r\rAfrica\r\r46.859\r\r135031164\r\r\r\rSingapore\r\rAsia\r\r79.972\r\r4553009\r\r\r\rSri Lanka\r\rAsia\r\r72.396\r\r20378239\r\r\r\rTunisia\r\rAfrica\r\r73.923\r\r10276158\r\r\r\r\rsample_df %\u0026gt;%\rselect(country, continent, lifeExp, pop) %\u0026gt;%\rgroup_by(continent) %\u0026gt;%\rsummarise(max_pop = max(pop),\rmean_life_exp = mean(lifeExp)) %\u0026gt;%\rprettify(cols_changed = 2:3)\r\r\rcontinent\r\rmax_pop\r\rmean_life_exp\r\r\r\r\r\rAfrica\r\r135031164\r\r60.3910\r\r\r\rAmericas\r\r190010647\r\r72.6445\r\r\r\rAsia\r\r20378239\r\r76.1840\r\r\r\rEurope\r\r9956108\r\r76.1115\r\r\r\rOceania\r\r20434176\r\r80.7195\r\r\r\r\rNow that we know how to use group_by(), we can summarize() data by group. This can be done using all of the summary functions seen earlier.\n\r\rSummary Functions\r\r\r\r\rfirst()\rmin()\r\rlast()\rmax()\r\rnth()\rmean()\r\rn()\rmedian()\r\rn_distinct()\rvar()\r\rIQR()\rsd()\r\r\r\r\rCalculate some summary statistics for each continent.\r\rtake gm_df and group_by() continent\rusing summarize() or summarise(), calculate:\r\rcount with n()\rmean_pop with mean()\rmax_gdp_per_cap with max()\r\r\r\rgm_df %\u0026gt;%\rgroup_by(continent) %\u0026gt;%\rsummarise(count = n(),\rmean_pop = mean(pop),\rmax_gdp_per_cap = max(gdpPercap)) %\u0026gt;%\rprettify(cols_changed = 2:4)\r\r\rcontinent\r\rcount\r\rmean_pop\r\rmax_gdp_per_cap\r\r\r\r\r\rAfrica\r\r624\r\r9916003\r\r21951.21\r\r\r\rAmericas\r\r300\r\r24504795\r\r42951.65\r\r\r\rAsia\r\r396\r\r77038722\r\r113523.13\r\r\r\rEurope\r\r360\r\r17169765\r\r49357.19\r\r\r\rOceania\r\r24\r\r8874672\r\r34435.37\r\r\r\r\r\r\rggplot() Exercise 5\rSteps\nUsing gm_df, filter() the data to remove rows where continent is not \u0026quot;Oceania\u0026quot;\rgroup_by() continent and year\rsummarize() the groups by calculating them mean() of pop\rungroup() the data, because this is a habit that will save you headaches later\rPipe the results to ggplot()\rSelect the plot’s aes()thetics\r\ryear for the x values\rmean_pop for the y values\rcontinent for the color values\r\rAdd geom_line() for the first geometry\rAdd geom_point() for the second geometry\rChange the theme by adding theme_minimal()\rUsing facet_wrap(), split the plot into panels for each continent\r\r~ is used as a formula to select the facet variable\r\rAdd a title and a caption with labs()\r\rgm_df %\u0026gt;%\rfilter(continent != \u0026quot;Oceania\u0026quot;) %\u0026gt;%\rgroup_by(continent, year) %\u0026gt;%\rsummarise(mean_pop = mean(pop)) %\u0026gt;%\rungroup() %\u0026gt;%\rggplot(aes(x = year, y = mean_pop,\rcolor = continent)) +\rgeom_line() +\rgeom_point() +\rtheme_minimal() +\rfacet_wrap(~ continent) +\rlabs(title = \u0026quot;Mean Continent Populations over Time\u0026quot;,\rcaption = \u0026quot;Source: Free material from www.gapminder.org\u0026quot;)\r## Warning: Removed 1 rows containing missing values (geom_path).\r## Warning: Removed 1 rows containing missing values (geom_point).\rالنهاية\nsessionInfo()\r## R version 3.5.1 (2018-07-02)\r## Platform: x86_64-w64-mingw32/x64 (64-bit)\r## Running under: Windows 10 x64 (build 17134)\r## ## Matrix products: default\r## ## locale:\r## [1] LC_COLLATE=English_United States.1252 ## [2] LC_CTYPE=English_United States.1252 ## [3] LC_MONETARY=English_United States.1252\r## [4] LC_NUMERIC=C ## [5] LC_TIME=English_United States.1252 ## ## attached base packages:\r## [1] stats graphics grDevices utils datasets methods base ## ## other attached packages:\r## [1] kableExtra_0.9.0 knitr_1.20.21 gapminder_0.3.0 ## [4] forcats_0.3.0 stringr_1.3.1.9000 dplyr_0.7.99.9000 ## [7] purrr_0.2.4.9000 readr_1.1.1 tidyr_0.8.1.9000 ## [10] tibble_1.4.2 ggplot2_3.1.0.9000 tidyverse_1.2.1.9000\r## ## loaded via a namespace (and not attached):\r## [1] tidyselect_0.2.5 xfun_0.4 haven_1.1.2.9000 ## [4] colorspace_1.3-2 generics_0.0.1.9000 htmltools_0.3.6 ## [7] viridisLite_0.3.0 yaml_2.2.0 utf8_1.1.4 ## [10] rlang_0.3.0.9000 pillar_1.3.0.9000 glue_1.3.0 ## [13] withr_2.1.2.9000 modelr_0.1.2 readxl_1.1.0 ## [16] plyr_1.8.4 munsell_0.5.0 blogdown_0.9.1 ## [19] gtable_0.2.0 cellranger_1.1.0 rvest_0.3.2 ## [22] codetools_0.2-15 evaluate_0.12 labeling_0.3 ## [25] fansi_0.3.0 highr_0.7 broom_0.5.0.9001 ## [28] Rcpp_0.12.19.3 scales_1.0.0.9000 backports_1.1.2 ## [31] jsonlite_1.5 hms_0.4.2 digest_0.6.18 ## [34] stringi_1.2.4 bookdown_0.7.21 grid_3.5.1 ## [37] cli_1.0.1 tools_3.5.1 magrittr_1.5 ## [40] lazyeval_0.2.1 crayon_1.3.4 pkgconfig_2.0.2 ## [43] xml2_1.2.0 lubridate_1.7.4 assertthat_0.2.0 ## [46] rmarkdown_1.10.14 httr_1.3.1 rstudioapi_0.8.0.9000\r## [49] htmldeps_0.1.1 R6_2.3.0 compiler_3.5.1\r\r\r",
    "date": 1521244800,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1541012094,
    "objectID": "356d974fbbdb1e58c66f2f280f965789",
    "permalink": "/post/yet-another-tidyverse-intro/",
    "publishdate": "2018-03-17T00:00:00Z",
    "relpermalink": "/post/yet-another-tidyverse-intro/",
    "section": "post",
    "summary": "A (hopefully) gentle introduction to R's tidyverse that I used as a primer for a short workshop series I taught.",
    "tags": [
      "R",
      "data-carpentry",
      "tutorial",
      "tidyverse",
      "ggplot",
      "dplyr"
    ],
    "title": "Thoughts on Teaching R and Yet Another Tidyverse Intro",
    "type": "post"
  },
  {
    "authors": [
      "Brendan Knapp"
    ],
    "categories": null,
    "content": "",
    "date": 1519372800,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1541196093,
    "objectID": "e13fb265d04922b7d1d0d89ec5551aac",
    "permalink": "/talk/r-for-data-carpentry/",
    "publishdate": "2018-02-23T00:00:00-08:00",
    "relpermalink": "/talk/r-for-data-carpentry/",
    "section": "talk",
    "summary": "A three-part workshop series teaching graduate students at the [Middlebury Institute](https://www.middlebury.edu/institute/) the fundamentals of programmatic data carpentry, visualization, and reproducible research.",
    "tags": [
      "R"
    ],
    "title": "R for Data Carpentry and Analysis",
    "type": "talk"
  },
  {
    "authors": [
      "Brendan Knapp"
    ],
    "categories": null,
    "content": "",
    "date": 1506063600,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1541196093,
    "objectID": "13561d01a9e5342e90cc9b00c3118fc2",
    "permalink": "/talk/intro-to-r/",
    "publishdate": "2017-09-22T00:00:00-07:00",
    "relpermalink": "/talk/intro-to-r/",
    "section": "talk",
    "summary": "Have you always been curious about programming, but haven’t had the opportunity for a simple introduction?\nDo you wish you knew how to access the data available on Twitter or other data-rich websites in your research?\nDo you want to expand your toolkit of hard skills while complementing your knowledge in international policy?\nHave you concluded that technical skills are major career assets and are incredibly attractive to employers?\nIf you answered “Yes” to any of these, please join the META Lab for our R and RStudio Geek Out and learn what’s possible with some some data programming knowledge!\nWe’re going to get our feet wet with a simple Introduction to R Programming which assumes ZERO knowledge.",
    "tags": [
      "R"
    ],
    "title": "Programming in R with RStudio",
    "type": "talk"
  },
  {
    "authors": [
      "Brendan Knapp"
    ],
    "categories": null,
    "content": "Click on the Slides or Code buttons above to view content.\n ",
    "date": 1490943600,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1541196093,
    "objectID": "69525aa2ee38933c74b7ba3577f043f9",
    "permalink": "/talk/intro-to-python/",
    "publishdate": "2017-03-31T00:00:00-07:00",
    "relpermalink": "/talk/intro-to-python/",
    "section": "talk",
    "summary": "A workshop for graduate students at the [Middlebury Institute](https://www.middlebury.edu/institute/) to introduce them to programming with Python.",
    "tags": [
      "R"
    ],
    "title": "Introduction to Python",
    "type": "talk"
  },
  {
    "authors": [
      "Melissa Hanham",
      "Jeffrey Lewis",
      "Catherine Dill",
      "Grace Liu",
      "Joseph Rodgers",
      "Octave Lepinard",
      "Brendan Knapp",
      "Olivia Hallam",
      "Ben McIntosh"
    ],
    "categories": null,
    "content": "",
    "date": 1372662000,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1540947664,
    "objectID": "f706c5e7a03814a938c5b41990814e82",
    "permalink": "/publication/geo4nonpro/",
    "publishdate": "2013-07-01T00:00:00-07:00",
    "relpermalink": "/publication/geo4nonpro/",
    "section": "publication",
    "summary": "On June 16, 2018, the James Martin Center for Nonproliferation Studies (CNS) launched Geo4Nonpro 2.0. With a mission to engage a “curated” crowd of satellite imagery analysis experts, Geo4Nonpro (G4N) is a tool for sharing open-source geographic information of known or suspected weapons of mass destruction (WMD) sites.",
    "tags": [
      "Geospatial",
      "Remote Sensing"
    ],
    "title": "Geo4Nonpro 2.0",
    "type": "publication"
  },
  {
    "authors": null,
    "categories": null,
    "content": " Welcome to Slides Academic\nFeatures  Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides  Controls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E  Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)  Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = \\;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\nFragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}}  Press Space to play!\nOne  Two  Three \nA fragment can accept two optional parameters:\n class: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears  Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}}  Press the S key to view the speaker notes!\n Only the speaker can read these notes Press S key to view   Themes  black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links   night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links  Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026quot;/img/boards.jpg\u0026quot; \u0026gt;}} {{\u0026lt; slide background-color=\u0026quot;#0000FF\u0026quot; \u0026gt;}} {{\u0026lt; slide class=\u0026quot;my-style\u0026quot; \u0026gt;}}  Custom CSS Example Let\u0026rsquo;s make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; }  Questions? Ask\nDocumentation\n",
    "date": -62135596800,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1540947664,
    "objectID": "c2915ec5da95791851caafdcba9664af",
    "permalink": "/slides/example-slides/",
    "publishdate": "0001-01-01T00:00:00Z",
    "relpermalink": "/slides/example-slides/",
    "section": "slides",
    "summary": "Welcome to Slides Academic\nFeatures  Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides  Controls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E  Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)  Math In-line math: $x + y = z$",
    "tags": null,
    "title": "Slides",
    "type": "slides"
  },
  {
    "authors": null,
    "categories": null,
    "content": "",
    "date": -62135596800,
    "expirydate": -62135596800,
    "kind": "page",
    "lang": "en",
    "lastmod": 1540947664,
    "objectID": "d82877ac5e447c72fb4d8d30579d2f8b",
    "permalink": "/project/snatools/",
    "publishdate": "0001-01-01T00:00:00Z",
    "relpermalink": "/project/snatools/",
    "section": "project",
    "summary": "An R toolkit to bridge graph classes and streamline network analytic workflows.",
    "tags": [
      "Network Analysis"
    ],
    "title": "snatools",
    "type": "project"
  }
]